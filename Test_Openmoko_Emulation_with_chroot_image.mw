There will be an image to provide a fresh Ubuntu 7.04 (feisty) containing the OpenMoko installation as generated by [[MokoMakefile]] including working [[OpenMoko under QEMU|QEMU]].

'''The Image may be available later today (2007/07/16). It will be about 15 GiB and the Download will be a bit smaller. '''.


== Usage of the chroot image ==

If you do just want to test some of the functionality and need a starting point, 
you can download an ext3 Image. 

The Image is just a first test and may contain errors as it's not tested well yet
(and the build process was not running through without user interferences).


=== Installation ===

You will need to decompress the Image (about 15 Gbyte). An you'll also need the chroot software
and loop back device support in your kernel.

To install chroot in GNU/Debian / Ubuntu you can use:

apt-get install dchroot


==== To mount and activate the chroot image use ====

Download, unzip2 and mount the Image:

 wget <image-file.tar.bz2>
 tar -xjf <image-file.tar.bz2>

 mkdir /var/chroot
 mount -o loop image-file.img /var/chroot

Add a new chroot configuration:

 echo "OpenMoko /var/chroot" | sudo tee -a /etc/dchroot.conf

Edit /etc/fstab and insert:
 /tmp            /var/chroot/tmp         none    bind            0       0 
 proc-chroot     /var/chroot/proc        proc    defaults        0       0 
 devpts-chroot   /var/chroot/dev/pts     devpts  defaults        0       0 

Mount binded directories and copy over you /etc/resolv.conf:
 mount -a
 cp /etc/resolv.conf /var/chroot/etc/

Start the chroot environment:
 dchroot -d -c OpenMoko    # -d to take the environment variables with you


=== Starting the Emulation ===

You can start the emulation by running:
 cd /home/moko/openmoko/trunk/src/host/qemu-neo1973/
 arm-softmmu/qemu-system-arm -M neo -m 130 -mtdblock openmoko/openmoko-flash.image \
 -kernel openmoko/openmoko-kernel.bin -usb -show-cursor -usbdevice keyboard

=== Additional Notes ===

There is no root password set an no user moko in the systems right now which should 
not be a problem when used in a chroot environment.
