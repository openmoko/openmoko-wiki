script to Auto connect to Open wirelss 81102 AP's

===TODO===
*determine AP without encryption and sort by best signal
*using essid of best signal perform connect/udhcpc and chknet every so often 
if net is down repeat
*put it all together 

=sandbox=
====iwscan perl====
<pre>
#!/usr/bin/perl
# Tim Osburn - tim@osburn.com
#
# install perl

$iwlist = "/sbin/iwlist eth0 scanning";

open scan, "$iwlist |";
while (<scan>) {
  if (/^\s+Cell (\S+) - Address: (\S+)/) {
    $CELL=$1;
    $ADDRESS=$2;
    # print "$1 $2";
    $INLOOP=1;
    }
  if (/^\s+ESSID:(\S+)/) {
    $ESSID=$1;
    print " $1";
    }
  if (/^\s+Frequency:\S+ \S+ \(Channel (\S+)\)/) {
    $CHAN=$1;
    print " $1";
    }
  if (/^\s+Quality=\S+\s+Signal level=(\S+).*/) {
    $SIGNAL=$1;
    print " $1";
    }
  if (/^\s+Encryption key:(\S+)/) {
    $ENCRYPTION=$1;
    print " $1\n";
    }
  }
close scan;
</pre>
produces output in the form of
"essid"  channel  signal_strength  encryption_status

<br> "ESSID_NAME1" 1 -82 on
<br> "ESSID_NAME2" 1 -49 off

[[category:Technical ]]
[[category:GTA02 Hardware]]
====/bin/sh====
(Not Finished)
<pre> 


#!/bin/sh

   #####################
###########################
#/var/wifi/hacker/kd8ikt###
# OMG i'm programming now!#
###########################
###we.trekbeyond.org#######
  #####################
        #KISS#

######wireless interface
IFACE=eth0
#
####host to do ping test
HOST=myspace.com
#
## heh ping flood the noobs 
#
#  Func.iwlist.open
##########################
Func_iwlist_open(){
iwlist $IFACE scanning \
| awk -F '[ :=]+' '/(ESS|Freq|Qual)/{ printf $3" " } /Encr { print $4 }' \
|sort -k4 -k3nr \
|grep off \
|awk '{print $1}'	}
##########################
Func_ifconfig_up(){
ifconfig $IFACE essid $Func_iwlist_open }
##########################
Func_ifconfig_down(){
killall udhcpc 
ifconfig $IFACE down	}
##########################
Func.chk.net()	{
ping -w 2 -c 1 $HOST 
if [ $=0 ];then ERROR=0; echo Online! fi done #W00T  
if [ $=1 ] ;then ERROR=1 ;echo FAILING fi #FAIL
done }

### MAIN  ##BROKEN
Func_MAIN(){
$Func.chk.net
while [ ERROR=1 ]; do
$Func.ifconfig.down
$Func.ifconfig.up $Func.iwlist.open 
udhcpc $IFACE


if [ ERROR=1 ];do $Func_MAIN ;fi
if [ ERROR=0 ];do sleep 30 ; fi 

done		}

</pre>
