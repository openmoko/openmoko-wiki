{{Languages|Manuals/SHR}}
 {| align="right"
  | __TOC__
  |}

==Введение в SHR==

Добро пожаловать в '''[[SHR]]''', дистрибутив разрабатываемый сообществом для (не только) телефонов Openmoko, HTC Dream, PalmPré и Nokia n900.

[[Image:SHR-Logo.png|200px|thumb|center|SHR]]

'''SHR'''  (Stable Hybrid Release)  существует для того, что бы дать вам образ корневой файловой системы, который вы сможете легко установить в свой аппарат и использовать его ежедневно, как телефон или КПК. Существует множество собранных программ, которые могут быть установлены по желанию пользователя, их так же могут использовать разработчики, как базовые образы для своих релизов. '''SHR unstable'''  - тестовая среда, используемая до того, как станет стабильным, а также тестовая площадка для релизов [[FSO]]. '''SHR testing''' предоставляет максимальную стабильность для каждодневного применения.

==Установка==

===Получение SHR===


Вам необходимо загрузить два файла для вашей версии телефона: ядро и корневую файловую систему. В зависимости от того, как вы будете устанавливать, во внутреннюю [[NAND_Flash/ru]] или на [[microSD]] карту, необходимо скачать файлы .jffs2 для NAND или .tar.gz для microSD.

- Ядро можно взять по ссылка ниже. Названия файлов начинаются с uImage-...

- Образы файловых систем, для NAND: full-om-gta0_.jffs2,  для µSD: full-om-gta0_.tar.gz

Это '''полные''' образы. Вы также можете выбрать образы с меньшим количеством предустановленных пакетов, отмеченные, как '''легкие'''.

;GTA02 Neo FreeRunner
*testing line: http://build.shr-project.org/shr-testing/images/om-gta02/
*unstable line: http://build.shr-project.org/shr-unstable/images/om-gta02/

;GTA01 Neo 1973
*testing line: http://build.shr-project.org/shr-testing/images/om-gta01/
*unstable line: http://build.shr-project.org/shr-unstable/images/om-gta01/

;От легкого образа к полному
Если вы прошили '''легкий''' образ и хотите обновить его до '''полного''' - выполните:

 opkg update
 opkg install task-shr-apps task-shr-games task-shr-gtk

;Модули ядра
Образы файловых систем упомянутые выше (.jffs2, .tar.gz), уже содержать свежие модули ядра.

Используйте свежие модули ядра только в том случае, если хотите прошить только новое ядро, а всю файловую систему. Модули можно скачать с той же страницы, что и само ядро (даты должны совпадать). Используйте sftp, что бы загрузить модули на свой FreeRunner через usb соединение. Запустите gzip, что бы распаковать файлы:
 # gzip -dc modules-...tar.gz | tar -xf - -C /

===Установка в flash память===

Если необходимо установить SHR во встроенную память вашего Freerunner(NAND), вам надо скачать файлы корневой файловой системы( <tt>.jffs2</tt> ), которые указаны выше, и прошить телефон с помощью утилиты <tt>dfu-util</tt>.

Посмотрите [[Flashing the Neo FreeRunner]] для детальной информации по процедуре прошивки и [[Dfu-util]] для информации о dfu-util.

{{Note|Батарея должна быть заряжена (в достаточном объеме) перед прошивкой NAND. Симптомы недостаточной зарядки: строка состояния "####" останавливается во время прошивки. Если это произошло, зарядите батарею и повторите процедуру позднее.}}
Команды для прошивки файловой системы и ядра:

Отметьте, что при использовании sudo могут возникнуть проблемы.

'''Не используйте sudo с dfu-util. Удостоверьтесь, что вы root, перед использованием dfu-util!'''

для GTA02 Neo FreeRunner:

 # dfu-util -d [[USB Product IDs|0x1d50:0x5119]] -a rootfs -R -D full-om-gta02.jffs2
 # dfu-util -d [[USB Product IDs|0x1d50:0x5119]] -a kernel -R -D uImage-om-gta02-latest.bin

для GTA01 Neo 1973:

 # dfu-util -d [[USB Product IDs|0x1457:0x5119]] -a rootfs -R -D full-om-gta01.jffs2
 # dfu-util -d [[USB Product IDs|0x1457:0x5119]] -a kernel -R -D uImage-om-gta01-latest.bin

===Установка на microSD карту===

Установка на карту microSD зависит от загрузчика, который вы используете, ''uBoot'' или ''Qi''.

Проще говоря, разница между загрузчиками состоит в том, каким образом вам необходимо подготовить вашу карту microSD и файлы:

* Если используется ''uBoot'', Необходимо сделать два раздела. Первый - небольшой, с файловой системой FAT16 или ext2, на нем размещается ядро (<tt>uImage-om-gta02-latest.bin</tt>) и второй раздел с файловой системой ext2 или ext3 куда вы распакуете образ корневого раздела (<tt>shr-image-om-gta02.tar.gz</tt>).

* Если используется ''Qi'', вам нужен только один раздел с файловой системой ext2 на вашей µSD карте куда вы распакуете образ корневого раздела (<tt>shr-image-om-gta02.tar.gz</tt>). В этом случае загрузчик Qi будет искать в каталоге <tt>/boot</tt> файл, называемый <tt>uImage-GTA02.bin</tt> .

Посетите следующие ссылки для детальной информации:
*Для [[Booting from SD | uBoot]] и для [[Qi]].

===Версия SHR===

Что бы узнать версию SHR, которая установлена, выполните:

 cat /etc/shr-version

{{Note|Помните, что выполнение opkg update;opkg upgrade не изменяет версию SHR. Только перепрошивка новым образом может изменить версию SHR.}}

==Запуск SHR==

===Первая загрузка===
[[Image:Shr-boot-preview.png|200px|thumb|center|SHR Boot Splash screen]]

====Загрузка====
Обычно первая загрузка занимает немного больше времени, чем обычно, т.к. некоторые приложения проводят инициализационные настройки. Рекомендуется перезагрузить телефон после первой загрузки (и после инициализации), что бы удостовериться, что все пакеты инициализировались правильно.

====Первичные настройки====

Во время первого запуска, мастер настройки запустится автоматически и проведет пользователя через базовые этапы настройки рабочего окружения Enlightenment. Эти шаги разнятся с развитием Enlightenment и SHR, на этом этапе выбираются настройки языка и профиль рабочего окружения. Профиль позволяет выбрать предустановленные настройки отображения рабочего стола. На выбор доступны Illume2-SHR (разработка продолжается) и Illume-SHR (разработка остановлена). Рекомендуется '''Illume2-SHR'''.
{| class="wikitable"
| [[Image:SHR-Setup-Language.png|200px|thumb|language selection]]
| [[Image:SHR-Setup-Profile.png|200px|thumb|theme selection]]
| [[Image:SHR-Wizard.png|200px|thumb|SHR Wizard]]
|}

Заметьте, что, возможно, Вам понадобиться соединиться с устройством через ssh и запустить /usr/bin/xinput_calibrator_once.sh, если есть проблемы с калибровкой. Проблема обнаружена на Neo1973 с образами SHR мая 2010.

====Мастер настройки SHR====
После инициализационных настроек запустится мастер настроек SHR, который позволит вам задать пароль суперпользователя и настройки телефонной сети.Иногда сообщение '''Please wait''' висит долгое время - мастер настройки ожидает инициализации SIM карты.

===Первое знакомство===
[[Image:SHR-First-Look.png|200px|thumb|Рабочий стол]]
[[Image:SHR-Task-Buttons.png|200px|thumb|Кнопки переключения задач]]
====Рабочий стол====
Рабочий стол - это место, куда вы попадаете после старта.

Файлы описаний значков рабочего стола находятся в /usr/share/applications. Все приложения запускаются в полноэкранном режиме, вы можете переключаться между ними используя стрелки '''"<"''' или '''">"''' на выпадающей панели, которую можно вызвать нажатием на верхнюю панель в пустом месте. Что бы закрыть приложение используйте '''"X"''' той же выпадающей панели. 

На верхней панели размещено несколько значков (e-gadgets):

Значок '''L''' служит для переключения эмуляции левого/правого щелчков мыши. Режимы переключаются нажатием на значок. После щелчка режим автоматически переключается обратно.

'''Значок переключения режимов''' позволяет разделить экран вертикально или горизонтально и отображать два приложения одновременно.

'''Значок клавиатуры''' скрывает/показывает клавиатуру.

'''Значок настройки Illume''' открывает окно [[#Illume_settings | настроек рабочего стола]].  

'''Значок "домой"''' позволяет быстро вернуться к рабочему столу.

Значки статуса '''GSM''' и '''батареи''' отображаются по умолчанию, также, как и время. Отображение значков '''Bluetooth''' или '''WiFi''' настраивается в диалоге настроек панели.


Что бы '''переконфигурировать  верхнюю панель''' - используйте "L/R" переключатель, нажмите на верхнюю панель и выберите: Illume Indicator->Set Content. Так же  можно выбрать Illume Indicator->Begin Move/Resize, что бы изменить размер или положение значков на панели. Для выхода из режима изменения размеров, снова переключитесь на "правую кнопку мыши", щелкните на верхней панели и выберите в контекстном меню: Illume Indicator->Stop Move/Resize.




====Клавиатура====

Клавиатура появляется автоматически, когда фокус окна находится в поле ввода, или же вы можете вызвать клавиатуру с помощью значка на верхней панели. В окне клавиатуры переключатель словарей находится в верхнем левом углу, в правом верхнем углу располагается переключатель раскладок. В клавиатуре по умолчанию подключен английский словарь. Что бы ввести пробел необходимо провести скользящее нажатие слева направо, справа налево - забой. Снизу вверх - возврат каретки, сверху вниз - быстрая смена раскладки. При наборе с подключенным словарем возможные варианты слов будут отображаться в центре сверху, больше вариантов будет в меня, выпадающем по нажатию стрелки сверху слева. Если вариант слова устраивает, необходимо на него нажать, что бы ввести слово с добавленным пробелом в поле ввода. Клавиатура и словарь могут быть [[#Illume_keyboard_and_dictionaries | локализованы]].

====Копировать - Вставить====

В приложениях '''основанных на библиотеках E''', к примеру, из пакетов phoneui-apps-*, меню копировать-вставить можно вызвать нажатием и удерживанием более двух секунд в текстовом поле. Нажали "Select", выделили текст. Затем в меню копировать-вставить нажать на "Copy". Для вставки необходимо вызвать меню копировать-вставить и нажать на "Paste".

В приложениях '''основанных на Gtk''', можно использовать клавиатуру (Ctrl-C - Ctrl-V) или выбирать соответствующие пункты в контекстном меню. 

В '''Vala Terminal''', можно просто выделить текст и нажать на соответствующую кнопку в меню терминала.

Копировать-вставить между различными тулкитами имеет некоторые ограничения(см. таблицу). В браузере Ventura эта функция не работает вообще.

{| cellspacing="0" class="wikitable" border="1" style="font-size: 85%; text-align: left;width="100%"
|-
! из -> в 
! в GTK
! в E
! в Terminal
|-
| в GTK
|style="background:#88FF88;"|Работает
|style="background:#88FF88;"|Работает
|style="background:red"|Не работает
|-
| в E
|style="background:red"|Не работает 
|style="background:#88FF88;"|Работает 
|style="background:#88FF88;"|Работает
|-
| в Terminal
|style="background:red"|Не работает
|style="background:#88FF88;"|Работает 
|style="background:#88FF88;"|Работает
|-
|}

====Будильник====

Приложение будильника (установленное по умолчанию) позволяет задать единоразовое или повторяющееся срабатывание будильника. Если вы задали время срабатывания будильника и выключили свой Openmoko Freerunner - в указанное время телефон включится и будильник сработает.

====Телефонные приложения====

Среди прочего, в SHR установлено 4 основных телефонных приложения: ''Dialer'', ''Contacts'', ''Messages'' и ''Phone log''.

{|
| [[Image:SHR-Dialer.png|200px|thumb|Dialer]]
| [[Image:SHR-Contacts.png|200px|thumb|Contacts]]
| [[Image:SHR-Mesages.png|200px|thumb|Messages]]
| [[Image:SHR-Phonelog.png|200px|thumb|Phone log]]
|}


=====PIM данные=====

======Хранилище======
PIM данные (контакты, сообщения и т.д.) хранятся через внутренние механизмы opimd в 

 /etc/freesmartphone/opim/pim.db

Эта база может копироваться из установки в установку, например, если необходима перепрошивка. Приложение Контакты легко может отображать изображения контактов. В базе хранятся только пути до изображений, поэтому, в случае резервного копирования '''необходимо копировать и изображения'''.

======Контакты SIM======

Телефонные приложения SHR не читают контакты с SIM карты, но можно использовать SIM Manager для доступа к ним '''SHR Settings -> Others -> SIM Manager''', это позволяет редактировать и импортировать контакты с SIM во внутреннюю память. Так же для этих целе можно использовать Pisi.

======Синхронизация======

'''[[Pisi]]''' - приложение для синхронизации PIM данных и может быть использовано для импорта и экспорта ваших контактов, календаря и т.д. между различных ресурсов, типа VCF, LDAP, Google и многих других. Для установки PISI выполните:

 opkg install pisi

После установки отредактируйте '''~/.pisi/conf'''. Для корректной поддержки полей в opimd убедитесь, что '''field_support=TRUE''' установлено в секции opimd.

В пакете с программой идет хорошо документированный пример конфигурационного файла
  /usr/share/doc/pisi/conf.example
Вы можете скопировать его и переименовать в
  /home/root/.pisi/conf
это будет хорошей отправной точкой в настройке PISI. Обратите внимание на секцию

 [opimd]
 description=OPIMD Contacts
 module=contacts_opimd
 field_support=TRUE

=====Хранитель экрана(экран блокировки)=====
[[Image:SHR-Idle_Screen.png|200px|thumb|Экран блокировки.]]
Экран блокируется нажатием кнопки AUX. Для разблокирования экрана необходимо вновь нажать AUX или передвинуть ползунок.

Вверху экрана значки отображающие статус процессов, проходящих в телефоне:

Слева направо:
GSM качество и оператор. Запущенные службы (GPS, Экран и т.д., например, когда запущена служба Экрана, экран не будет гаснуть).  Уровень заряда батареи.

====Настройка приложений====

[[#SHR_Settings | Настройки SHR]] запускаются нажатием на иконку Settings рабочего стола. [[#Illume_settings | Настройки Illume]] доступны в ниспадающей верхней панели, необходимо нажать на иконку с логотипом SHR.

[[Image:SHR-Top-Shelve.png|200px|thumb|Верхняя панель с иконкой настройки Illume]]

====Аппаратные кнопки====

=====Кнопка включения питания=====

The '''PWR''' (Power) button is mapped to start [[#quick_settings | Quick Settings]] screen (Illume System menu in older versions) on a short press. 

Mapping of the PWR button be configured via the '''Illume Settings-> Input -> Key Bindings'''.

Pressing the Power button for longer then 8 seconds will force a complete power down of the device. This is hardconfigured in the kernel.
<div id="quick_settings"> </div>
The '''Quick Settings''' screen provides several toggles: Airplane mode, Phone profiles, Power settings and Power buttons.

=====Дополнительная кнопка=====
The '''AUX''' (Auxiliary) button is mapped to toggle on/off the SHR Idle screen. Mapping of this button is configured in /etc/phonefsod.conf

 idle_screen = aux,lock

You can configure the [[#idle_screen | Idle Screen]] to come up even during active phone call by adding '''phone''' to the setting: 

 idle_screen = aux,lock, phone

<div id="idle_screen"> </div>
The '''Idle Screen''' shows current date and time, missed calls and messaged and also what [[#FSO_Resources | FSO resources]] are currently being requested - used.

======Замена экрана простоя======

If you with to use the previous simple LOCKED screen instead of the new standard Idle Screen

Edit '''/etc/phonefsod.conf''' to this:

 # when to show idle screen
 # ...
 # idle_screen = aux,lock
 idle_screen =

You need to restart phonefsod to make the change happen.

Also, change key mapping for the AUX button by setting '''Illume Settings''' -> '''Input''' -> '''Key Bindings''', bind the key '''XF86Phone''' to '''Desktop Simple Lock'''

===Первые шаги===

Right after installation and first boot you might want to do a few initial steps like adjusting the call volume and some other tasks.

====Звук - громкость звонка====

During the first phone call please use the Volume and Mic sliders on the Active Call Screen and adjust them to fit your preferences. When you have found good settings, terminate the test call and reboot the phone. The new improved settings will then be used for all in- and outgoing calls thereafter.

====Сетевое подключение====
''Establish network connection'' and SSH into your phone. You can establish connection either via USB to your desktop and enable NAT or you can connect through Wifi. If you use USB, some setup is required on the desktop side, please read [[USB Networking]]. For Wifi, you can use [[#Network manager|Network Manager]]

====Инициализация базы данных opkg====
''Инициализация базы данных opkg'' необходима для установки приложений из репозиториев SHR или других источников, например, [http://opkg.org opkg.org]. Когда будете в сети, выполните:

 opkg update

Поиск в базе данных opkg может занимать длительное время. Это можно ускорить, если скопировать содержимое базы в в текстовый файл, а потом просто искать в нем с помощью grep. Это можно проделать единожды, либо после каждого обновления opkg:

 opkg list > packages.txt

Теперь можно быстро искать по имени пакета, например navit:

 grep navit packages.txt

====SwapSpace====

When the RAM is used up, applications get killed. This is particularly bad while doing opkg upgrade. Therefore you might want to create a swap space. Read [[SwapSpace]] article.

==Настройки==
===Настройки SHR===
[[Image:SHR-Settings-main.png|200px|thumb|SHR Settings]]

SHR Settings is the main setting application of SHR. It provides an easy way of setting up your phone to your liking - from phone related settings, to requesting resources in order to prevent screen dim or suspend (for example while using GPS).

Please refer to [[#FSO_Resources | this section]] about a better way to manage preventing screen dim or suspend.

While some settings are persistent over reboots, others are not.

====Главный экран====
The main screen is divided into eight categories, which contain several modules. Every SHR Settings module has a specified task - for example controlling the GSM antenna power, setting the time etc.

====Телефон====
Here you can set if the GSM antenna is on and if your phone number is shown  when you call someone.

'''GSM'''
In GSM settings you can turn off and on GSM module. After turning off antenna, whole GSM modem is turned off.

To list available providers, click on Operators button. Scanning can take some time. After a while, a list of operators should pop up.

You can't connect to operators marked [forbidden].

Selecting an operator from the list also changes modem registration mode to manual. It won't register to other network, even if some is available and has better signal strengh. To return to automatic mode, click "Automatic" button in operator list.

'''Call'''
{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-Phone.png|200px|thumb|Phone settings]]


! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Settings-List-providers.png|200px|thumb|List providers]]

|}

You can set if your phone number should be displayed to other party. You can either depend on network decision ("By network") or force it manually ("Manual")

'''Phoneutils'''

For the default SHR phone applications to be able to correctly parse incoming calls/messages and match them with your contacts, you will need to set the right country code for your location. (for example 420 for Czech republic) for more info, please go to: http://wiki.openmoko.org/wiki/Phone_Prefixes

'''SIM'''

Here you can view some informations about your SIM card and clean phone and messagebooks.

====Профили====

Here you can select the current profile, which the device should use to determine ring tone etc.

'''Current profile'''

Here you can adjust properties of the currently used profile. 

To change the ring tone, click the "Change" button.

To use your own ring tone, place it in /usr/share/sounds directory.

After selecting a sid tune as the ring tone, there are available controls to select tune number from the file.

If you like to test a .sid you can play it using this command on the FR:

 gst-launch filesrc location=Arkanoid_PSID.sid ! siddec tune=2 ! alsasink

Note that it's a ! used and not a | to construct the gstreamer pipe command.

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-Profiles.png|200px|thumb|Profiles]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Settings-Profiles-Ringtones.png|200px|thumb|Ringtones]]

|}

====Подключения====

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-Connectivity.png |200px|thumb|Connectivity top]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Settings-Connectivity2.png |200px|thumb|Connectivity bottom]]
|}

'''WiFi'''

With the "WiFi radio" toggle you can set, if the wifi module is powered. WiFi radio has to be turned on before trying to connect to a WiFi network, unless you try to connect through [[Mokonnect]] which is capable of powering it up.

'''GPRS'''

To enter APN, login and password fields, just click on the actual value (default: "internet"). Your phone provider can provide the required configuration options.

{{Note|You can also use Mokonnect to manage your GPRS connection}}

'''USB'''

With this toggle you can switch USB port between device (Neo to PC) or host (device to Neo) modes.

'''Bluetooth'''

To power up Bluetooth module, switch the "Bluetooth radio" toggle to "On". After that, the "Visibility" toggle should arrive - set it to "On" if you want your FR to be visible by other Bluetooth devices on scanning.

====Питание====

'''Battery'''

This module displays informations about battery state - charge, voltage, remaining time etc. To update the data, click the "Update" button.

Here you can also force enable 500mA charging.

'''Display'''

With this slider you can easily set the backlight brightness.

{{Note|This setting isn't permanent over sessions. At boot backlight is set back to 80%.}}

'''Power'''

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-Power.png |200px|thumb|Power]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Settings-Timeouts.png |200px|thumb|Timeouts]]
|}

Here you can turn on or off automatic dimming or suspend after idle timeout (see: Timeouts module)

'''Timeouts'''

Timeouts are reached in this order: idle -> idle dim -> idle prelock -> lock -> suspend. 

{{Note|Configuration behavior  has been changed due to FSO rewrite.}}

'''Old behavior''' (delete by Apr 1st):

Here (Timeouts screen of SHR Settings) you can set up values of idle timeouts used by the device. This setting changes parameters in '''/etc/frameworkd.conf''' :

 [fsodevice.kernel_idle]
 suspend = 20
 lock = 2
 idle_prelock = 12
 idle = 10
 idle_dim = 20

'''New behavior:'''

Storing of this setting via D-bus calls is not supported in the new API of Vala rewrite of FSO2. SHR Settings doesn't have a setting for this. Configurable values are now stored in '''/etc/freesmartphone/conf/GTA02/fsodeviced.conf''' but you can keep your own config file in your home directory:

 ~/.fsodeviced.conf

====Внешний вид====

'''Theming'''
[[Image:SHR-Neo-Theme.png|200px|thumb|Neo theme]]

The Apperance section allows you to change between installed themes. To install more themes, see also [[#Installing themes | Installing themes]].

You can change finger size - this will mainly effect vertical spacing between widgets.

Switching between engines:

E can be switched to use different engines. The default engine is x11. Alternative engine x11-16 is not supported and results in buggy behavior of several applications, for example the phone suite or Ventura browser.

Changing Splash screen is also possible in this module. To install more splash screens, see also [[#Installing splash screen themes|Installing splash themes]].

====GPS====

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "


! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-GPS.png |200px|thumb|center|GPS]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Settings-GPS-Satelites.png |200px|thumb|GPS Satelite details]]
|}

'''GPS'''

By default, GPS is turned on only when requested by an application. That state corresponds to "Auto" setting. After changing to "Manual", you can force set it to on or off.

'''GPS information'''

This page can be used to monitor GPS status. You either have to turn GPS on manually or start another application to enable the GPS.

You can also view information about every visible satellite and check, which are used for getting a fix. To do that, click "Satellite details".

'''Remove AGPS data'''
If you experience problems with GPS, turn it off, click "Remove AGPS data" and reboot your Neo.
Assisted GPS ([[aGPS]]) support GPS receiver to find position by non-satellite information.

====Дата/время====

[[Image:SHR-Settings-Date-Time.png |200px|thumb|Date & Time]]

'''Time'''

Here you can view and set the time. By default, the time is just displayed, To adjust it, click on "Set time".

After finishing adjusting, click the "OK" button.

'''Date'''

This module displays the current date.

====Остальное====

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

[[Image:SHR-Settings-Others.png |200px|thumb|Others]]

'''PIM'''

Pim data are stored in opimd domains. Every opimd domain has different backends to store its data to. The domain reads data from every backend and writes data to the default backend. This elector allows you to  choose the backend that stores newly generated data, it doesn't copy or move existing data to a different backend.

'''Services'''

The services selector is listing scripts from /etc/init.d/ directory.

After clicking on a servis, you can either start, restart or stop the service and view the result.

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "


! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " |

[[Image:SHR-Settings-Services.png |200px|thumb|center|Services]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:50% " | 
 
[[Image:SHR-Service-restart.png |200px|thumb|Services debug screen]]
|}


'''Userspace backups'''

Here you can either archive or restore your files and configurations.

=== Настройки illume ===

The Illume desktop can be easily customized - slide the top shelf down and tap the Settings icon (SHR Logo).

'''Illume settings''' (SHR Logo icon) provides various options to alter the desktop environment. You can change sizes of elements, single or double click, wallpaper. To access all the various options, open Illume Settings and slide the visible icons to the left, to view more options on the right hand side.

The little applets in the top shelf (for example Battery, GSM, Bluetooth etc.)  are called '''shelf gadgets''' and you can configure whether they are visible (on the front part of the top shelf) or hidden (you can access them by sliding the top shelf) through Illume Settings -> Display -> Shelf gadget.

Some setting screens are not resized properly to fit the phone's display - for example the Wallpapper setting. This is a known bug already reported upstream.

<!-- [[Image:SHR-Top-Shelve.png|200px|thumb|Top Shelf]] -->


==Локализация==

=== Ручная локализация SHR ===

[[Image:SHR-Illume-Settings-Languages.png|200px|thumb|Setting Language]]

====Окружение рабочего стола====

You can change the language of the SHR desktop environment by using the Settings of Illume. For Example, for Czech language: in the Illume top shelf go to Settings (SHR Logo) -> Language -> Language Settings -> and choose: Čeština. If your language is not in the menu you can install by using opkg.

You can list all available languages by running:

 opkg list | grep eglibc-locale-

And install the language of your choice (for example czech):

 opkg install eglibc-locale-cs

After this, the Language Settings of Illume will offer Czech. 

This will localize the Illume environment and will also set correct lang environment variable of your desktop. 

====Приложения====

If you wish to have other applications localized, you need to install translation for each of them (presuming it is available):

This will install czech localization for SHR phone applications, SHR Settings and TangoGps:

 opkg install libframeworkd-phonegui-efl-locale-cs shr-settings-locale-cs tangogps-locale-cs

====Окружение терминала====

Для локализации терминального окружения (ssh) установите переменные LANG и LC_ALL в файле /etc/profile, например для Русского языка:

 export LANG=ru_RU
 export LC_ALL=ru_RU

====Клавиатура и словари Illume====

The Illume keyboard offers English dictionary correction by default. You can list all the dictionaries available for installation:

 opkg list | grep illume-dic

If your language is not available and the English one is bothering you, you can set an empty dictionary:

 echo "" > /usr/lib/enlightenment/modules/illume/dicts/None.dic

By using it, it will get filled by the words you use and after time will start helping and correcting your typing.

[[Image:Illume-keyboards-terminal-dutch-nl-screenshot.png| Dutch terminal virtual keyboard|256px|thumb]]
Furthermore you can install a different keyboard with a layout which fits your language or alternatives for the default keyboards like the numerical one. The localized [[Illume keyboard]]s are available in the SHR repository under the name ''illume-keyboard-LANG''.

Note that sometimes after an upgrade of Illume has taken place, these keyboards have to be installed again before they become available again. Removing these packages will restore the availability of the respective original keyboards.

==== German (and Austria) Language ====

See [[Configure_SHR_for_German-speaking_use]] for detailed customization for german speaking.

===Дата и время===

The local timezone is automatically retrieved from the GSM network.

create a symlink named /etc/localtime which points to the appropriate file in /usr/share/zoneinfo. For example, if you're in France., the following command will link the correct zoneinfo file to your /etc/localtime, giving you the correct time:

 ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime

Afterwards, edit /etc/timezone if necessary [?]

Local timezone work instantly for the current boot when:

 TZ="Europe/Paris"
 export TZ

For a permanent timezone change edit /etc/profile and change to:

 TZ="Europe/Paris"

Date and time are automatically set from GPS or Network. The easiest way of setting the time for the first time is to run TangoGps (GPS & Map icon) and obtaining GPS fix. Time will then be set automatically after several minutes.

Time can set time also manually.

Via SHR-Settings -> Date/time -> Set time

From linux based desktop:

 ssh root@192.168.0.202 "date -u -s `date -u +%m%d%H%M%Y.%S`"

You can also set the hardware clock to the system time:

 hwclock --systohc

Is this better?:

 hwclock --utc --systohc

It is possible to instruct framework on how to set the time and timezone in /etc/frameworkd.conf :

 [otimed]
 # a list of time/zone sources to use or NONE
 timesources = GPS,NTP
 zonesources = GSM
 # use an ip address here, otherwise DNS resolution will block
 ntpserver = 134.169.172.1
 
To disable automatic date/zone settings, simply create an empty [otimed] section in /etc/frameworkd.conf

==Ресурсы FSO==

[[FSO]] контролирует каждое устройство. Устройства называются ''ресурсами''. Если программа желает использовать устройство, то можно обратиться к этому ресурсу через <tt>d-bus</tt>, FSO сделает это, или вы можете задействовать ресурс вручную. После того, как запрос ресурса будет выполнен, FSO отключит устройство. Ручной запрос ресурса может быть выполнен с помощью ''SHR Setting'' или команды <tt>fsoraw</tt>. (Применение fsoraw быстрее и лучше использования команд d-bus)

 opkg install fsoraw

Пример использования fsoraw:

 fsoraw -r Display mokomaze

Смотрите [[FSO Resources]] для большей информации по использованию следующих ресурсов:

'''Wifi'''

Пока этот ресурс задействован нет eth0 и wifi модуль полностью отключен. Используйте [[Mokonnect]] настройки сетей, он автоматически включит Wifi если необходимо.

'''Bluetooth'''

Необходимо обратиться к этому ресурсу, что бы задействовать модуль bluetooth.

'''GPS'''

Демон fso-gpsd ждет подключений от gsmd, автоматически включая и выключая устройство. Как только появляется подключение, он включает GSM. В ''SHR Settings'' можно полностью выключить GPS 

 SHR Settings -> GPS -> Manual > Off

'''GSM'''

Необходимо обратиться к этому ресурсу, что бы включить модуль GSM.

'''Display'''

Если обратиться к этому ресурсу, то  суспенд будет выключенным, и включится экран.

'''CPU'''

Если обратиться к этому ресурсу, то суспенд будет выключен. Экран будет чистым.

'''Test'''

Тестовый ресурс.

'''UsbHost'''

При обращении к этому ресурсу USB переключится в режим хоста.

'''Accelerometer'''

Необходимо обратиться к этому ресурсу, что бы включить акселерометр.

==Network manager==

While there are several ways of networking - Wifi, USB, Bluetooth and Gprs - By default, USB networking is enabled in <tt>/etc/network/interfaces</tt>.

Enhanced configuration is possible through direct editing of /etc/network/interfaces or through [[Mokonnect]].

The <tt>connmand</tt> daemon with Mokonnect are the recommended user level applications for setting up networking. At the moment, Mokonnect can manage USB, Wifi and Gprs connections, as well as routing and NAT. The Wifi device is not required to be manually turned on via SHR-Settings as Mokonnect will automatically enable the device when needed and disable it after use.

{| class="wikitable" cellspacing="0" cellpadding="0" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #c0c0c0; background:#eeeeee; floating="center";width:100%; "

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:33% " |
[[Image:SHR-Mokonnect.png|200px|thumb|Mokonnect]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:33% " | 
 
[[Image:SHR-Mokonnect-Wifi.png|200px|thumb|Mokonnect Wifi]]

! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:0px solid #222222; width:33% " | 
 
[[Image:SHR-Mokonnect-Wifi-Scan.png|200px|thumb|Mokonnect Wifi Scan]]


|}

==Bluetooth==

Bluetooth can be used for several different applications - file transfer (OBEX), networking, input devices (HIDD), music playing (A2DP), calling etc. In some occasions, the devices need to be authorized - paired. At the moment, support for some bluetooth functions is better than for others - it is possible to do all mentioned above with the notice that phone calls with bluetooth headset are always routed to the bluetooth even if the bluetooth headset is not around, making it quite difficult to use.

In the SHR repositories are applications ready to be installed (by opkg) that already do provide bluetooth support. This means that they request the bluetooth resource automatically, can search bluetooth devices around, help you with pairing and can perhaps even reconnect bluetooth headset upon resume from suspend.  From applications that have some bluetooth support some are for example [[Launcher]] (home screen launcher and phone suite), [[Podboy]] (podcast player), [[Elmtooth]] (bluetooth manager). In order to set up bluetooth for phone calls, some manual setup from [[#GSM_phone_calls_with_bluetooth_headset | bellow]] is still required.

===Bluez3 - вручную без D-Bus===

If you want to use the bluetooth device directly, you need to turn the bluetooth radio on in SHR Settings -> Connectivity -> Bluetooth Radio: On. You can also make the bluetooth device visible here.

====Работы с файлами через OBEX====

There are several obex programs allowing file transfer, all in console at the moment. Obexpush installs obextool, and opd daemon:

 opkg install obexpush

Default receiving path (editable in /etc/default/opd_args ) does not exist, so create it

 mkdir /var/obexpush

Files are then received automatically, no notice, no confirmation... they just silently appear in /var/obexpush

To send some files, first scan for devices:

 hcitool scan
 Scanning ...
 	00:16:41:F5:A5:BC	laptop

Then send the file onto bluetooth address found in the scan:

 obextool push image.jpg 00:16:41:F5:A5:BC 10

====Подключение bluetooth клавиатуры====

 hidd --search

 Editors note: This is the old bluez3 way, but it works. New bluez4 way will replace this.

===Bluez4 - D-Bus based way===

SHR uses bluez4 which is completely different from bluez3. The bluetoothd is taking care of most of the bluetooth now. Please see [[Manually using Bluetooth]] for detailed information about using bluetooth and also for a list of supported devices.

====Подключение====

[[Emtooth]] менеджер bluetooth соединений. Позволяет задавать bluetooth имя устройства, подключение/отключать, настройки видимости устройства и др. Что бы установить Emtooth, выполните:

 opkg install emtooth

Emtooth начнет поиск доступных устройств, двойное нажатие на строке с именем найденного устройства начнет процесс подключения.

====GSM с bluetooth гарнитурой====

Чтобы использовать bluetooth гарнитуру для совершения телефонных звонков, необходимо выполнить несколько простых действий.

1). Ваша bluetooth гарнитура должна быть сперва [[#Подключение | подключена]].

2). [[#Настройка FSO | Добавьте]] вашу bluetooth гарнитуру в настройки FSO.


{{Note|Все звонки будут идти через гарнитуру. После старта и каждого суспенда гарнитура должна быть [[#Переподключение гарнитуры |переподключена]].}}

=====Настройка FSO=====

Сейчас мы должны сказать frameworkd, что у нас есть гарнитура bluetooth. Параметры гарнитуры должны быть заданы в:

 /etc/freesmartphone/opreferences/conf/phone/default.yaml

Параметры bt-headset-enabled и bt-headset-address смотрите opreferences/schema/phone.yaml для понимания.

Теперь надо перезапустить FSO, что бы изменения вступили в силу.

 # /etc/init.d/frameworkd restart

Пример чьего-то /etc/freesmartphone/opreferences/conf/phone/default.yaml:

 message-length: 7
 message-tone: notify_message.wav
 message-vibration: 1
 message-volume: 10
 ring-loop: 1
 ring-tone: ringtone_ringnroll.wav
 ring-vibration: 1
 ring-volume: 10
 bt-headset-enabled: 1
 bt-headset-address: 00:09:DD:31:92:98

=====Переподключение гарнитуры=====

Возможно вам понадобиться вручную задействовать гарнитуру в самом начала и после суспенда:

 mdbus -s org.bluez /org/bluez/`pidof bluetoothd`/hci0/dev_xx_xx_xx_xx_xx_xx org.bluez.Headset.Connect

Где xx_xx_xx_xx_xx_xx адрес гарнитуры, например:

 mdbus -s org.bluez /org/bluez/`pidof bluetoothd`/hci0/dev_00_09_DD_31_92_98 org.bluez.Headset.Connect

Сейчас гарнитура должна работать.

==System Customizing==

===Установка тем splash screen===

List available splash screen themes

 opkg list | grep splash-theme

Install one of the available themes

 opkg install shr-splash-theme-dontpanic

Then go to '''SHR Settings -> Appearance -> Splash settings'''. Here you can preview installed themes and change the default one.

===Установка тем===

Every theme is made of several components (a theme for illume, theme for the phone applications, theme for etk and so on). There is a SHR metapackage for each theme that allows installing the complete theme in one go.

List available SHR theme metapackages:

 opkg list | grep shr-theme

Install one of the available themes

 opkg install shr-theme-gry

Then go to '''SHR Settings -> Appearance -> Elementary Settings'''. Here you can preview installed themes and choose the preferred one.

The Illume screen requires to change theme via '''Settings (SHR Logo) -> Look -> Theme'''. Here you can preview installed themes and choose the preferred one.

===Включение курсора мыши=== 

edit line 143 of /etc/X11/Xserver and erase '''-nocursor'''

 ARGS="$ARGS"



===Случайные ошибки===
Нет иконок, не работает GSM и т.д. - скорее всего это из-за '''ошибок на µSD карте'''. Извлеките карту и исправьте проблему через картридер или загрузитесь из nand смонтируйте карту в режиме для чтения и запустите fsck:

 fsck.ext2 /dev/mmcblk0p1

===GSM modem 1024 suspend bug===

The calypso GSM modem suffers a known [[1024]] hardware bug that causes unreliable GSM function. To work it around, SHR by default doesn't suspend the modem completely. If you have undertaken a fix for this bug you can extend your battery time by enabling the modem to fully suspend when possible.

Edit the following in /etc/frameworkd.conf file:

 ti_calypso_deep_sleep = always

Then restart framework or reboot the phone.

==Сообщения об ошибках==

SHR находится в разработке. Если нашли ошибку, пожалуйста, сообщите о ней SHR. Приложите к своему сообщению логи из:

 /var/log/

Что бы сообщить об ошибке, зайдите на http://shr-project.org/trac/report

Проверьте, известно ли уже об этой ошибке. Если нет, добавьте, будьте максимально точны в заголовке и описании, при каких условиях это произошло и т.д. Если уже есть упоминание об этой ошибке, посмотрите, возможно вы можете добавить более свежую информацию.

== Дополнительная Информация ==

Посетите:
* [http://blog.shr-project.org Блог]
* [http://trac.shr-project.org Домашняя страничка проекта (Bugtracker)]
* [http://git.shr-project.org Git (Репозиторий исходных кодов)]
* [http://build.shr-project.org Buildhost (Загрузки)]
* [http://shr-project.org/trac/wiki/Tweaks Настройки (On the Wiki)]
* [http://lists.shr-project.org Списки рассылок пользователей и разработчиков]



[[Category:SHR]]
[[Category:Manuals]]
