The Neo Freerunner (GTA02) inherited the audio subsystem from its older brother the Neo 1973 (GTA01). However, there are a few small differences.
This page tries to show and explain the differences and points you to the [[Neo_1973_audio_subsystem | Neo 1973]] page whenever it touches the common points (but there may be overlaps for the sake of usability). As wiki pages are, errors and omissions are likely, and your help is welcomed.


----


'''Differences from Neo 1973'''
* There is only 1 (mono) built-in loud speaker instead of 2 (stereo).
* The Wolfson Codec driver presents 94 separate controls {switches, multiplexers, and volumes} to the alsa system (in both Neos). Unfortunately they are not mapped exactly the same for the GTA01 as for the GTA02.


----


'''Possible sound connections through the Wolfson Codec'''

* "Yes" = Confirmed, alsa state file exists.
* "No" = Not possible / not desirable.
* "Should" = Should be possible, not confirmed yet.
* "?" = Have no idea.

{| cellspacing="0" cellpadding="5" border="1"

|- align="center"
! GSM
| ?

|- align="center"
! Bluetooth
| ? || Yes

|- align="center"
! Wired Speaker
| Yes || Yes || ?

|- align="center"
! Wired Mic
| Yes || Yes || ?

|- align="center"
! Body Earpiece
| Should || Yes || ?

|- align="center"
! Body Speaker
| Yes || Should || ?

|- align="center"
! Body Mic
| Should || Yes || ?

|- align="center"
! - !! CPU !! GSM !! Bluetooth
|}


----


'''Alsamixer channel controls'''

The ALSA state files are installed by default, and belong to package ''"openmoko-alsa-scenarios"''.
To see where the files reside, do ''"opkg files openmoko-alsa-scenarios"''.
Currently they are in ''"/usr/share/openmoko/scenarios/"''.

# State: '''''GSM <-> Built-in Handset''''' (file gsmhandset.state)
## Mic volume:
##* Control 48: "Mic2 Capture Volume"
##* Control 12: "Mono Sidetone Playback Volume"
##* Control 5: "Mono Playback Volume"
## Speaker volume:
##* Control 6: "Bypass Playback Volume"
##* Control 4: "Speaker Playback Volume"
# State: '''''GSM <-> Built-in Handsfree''''' (file gsmspeakerout.state)
## Mic volume:
##* Control ?:
## Speaker volume:
##* Control ?:
# State: '''''GSM <-> Wired Headset''''' (file gsmheadset.state)
## Mic volume:
##* Control 49: "Mic1 Capture Volume"
##* Control 12: "Mono Sidetone Playback Volume"
##* Control 5: "Mono Playback Volume"
## Speaker volume:
##* Control 6: "Bypass Playback Volume"
##* Control 3: "Headphone Playback Volume"
# State: '''''GSM <-> Bluetooth Headset''''' (file ???)
## Alternative working state files: [http://handheldshell.com/gsm_headset.txt]
## Mic volume:
##* Control 13: "Mono Voice Playback Volume"
##* Control 5: "Mono Playback Volume"
# State: '''''CPU <-> Built-in Handset''''' (file voip-handset.state)
## Mic volume:
##* Control ?:
## Speaker volume:
##* Control ?:
# State: '''''CPU <-> Wired Headset''''' (file headset.state)
## Stereo sound:
##* Control ?:
## Headset output:
##* Control 94: "Amp Spk Switch" <- false
# State: '''''CPU <-> Buildin Speaker''''' (file stereoout.state)
## Mono sound:
##* Control ?:
## Headset output:
##* Control 94: "Amp Spk Switch" <- true


* These files I still don't know what they are for:

--[[User:Femto|Femto]] 12:39, 24 September 2008 (UTC) I've updated above values. Must be checked.

----


=== Volume Control ===

Angus Ainslie has written a simple [http://n2.nabble.com/Sound-quality-in-calls.-tp1087522p1096155.html python volume control] (which is getting more and more sophisticated) using some of these settings.

Installing the GUI mixer

:Download the the following files

:http://handheldshell.com/pymixer.py
:http://handheldshell.com/volume.desktop

<pre>
cp pymixer.py /usr/bin
chmod u+x /usr/bin/pymixer.py
cp volume.desktop /usr/share/applications
opkg install python-pygtk
opkg install http://handheldshell.com/python-pyalsaaudio_0.3-ml0_armv4t.ipk
</pre>

If the python script aborts unexpectedly then look [http://lists.openmoko.org/nabble.html#nabble-td1128064 here] for a fix
----

[[Category:Neo FreeRunner Hardware]]
[[Category:Audio]]
