{{Languages}}
QtMoko is a [[Debian]] based distribution for the [[Neo FreeRunner]]. The phone and user interface are based on [[Qt Extended Improved]] formerly known as [[Qtopia / Qt Extended on FreeRunner|Qtopia]]. The QtMoko wiki can be found [http://qtmoko.org/ here].

===Download===
Download the following files from [https://sourceforge.net/projects/qtmoko/files/ radekp download] to you desktop computer:
* latest
** https://sourceforge.net/projects/qtmoko/files/

===Installation===
If you flash the FreeRunner with a kernel image from QtMoko, then you must install the kernel and the root file system with [http://wiki.openmoko.org/wiki/Dfu-util#Binaries_dfu-util dfu-util]. 

==== Installation on SD card with Qi ====
If you have [[Qi]] installed then you can install QtMoko on the SD card. This seems to be useful if you want to work with different distribution and you can change the distribution just by changing the Mirco SD card in your FreeRunner. 
{{Note|Installation in NAND-Memory with Qi is possible without errors, but with an installed bootloader [[Qi]] the boot process will terminate. Install u-Boot instead!}}

==== Installation in NAND Memory with u-Boot ====
If you have [[Qi]] installed then install u-boot again as a [[bootloader]] by downloading a u-boot-binary on http://downloads.openmoko.org/distro/unstable/daily/ otherwise the boot process will terminate and you have to install u-Boot.

All versions of the GTA02 (Neo FreeRunner) that have been sold to the public are version 5 hardware, so look for a file with "gta02" and "v5" in the name, for example:
uboot-gta02v5-latest.bin

  sudo dfu-util -a u-boot -R -D u-boot-gta02v5-1.3.1.bin

==== Installation of Kernel and Root-FS ====
Switch off your FreeRunner and press the AUX and Power-On button at the same time. Your FreeRunner is showing the following U-Boot Menu:

   *** BOOT MENU (NOR) ***

   Boot
   Boot from Mirco SD (FAT/ext2)
   Set Console to USB
   Set Console to Serial
   Reboot
   Power Off  

The FreeRunner will stay in this mode for only 30 sec. Within this time you have to start <tt>dfu-util</tt>. If you want to flash the kernel image (you will need to be root on your PC) then you have to start the following command in the 30sec your see the BOOT MENU:

 # for the Neo FreeRunner:
 dfu-util -d [[USB Product IDs|0x1d50:0x5119]] -a kernel -R -D  uImage-v24.bin

and finally the root fs with this one:

 # for the Neo FreeRunner:
 dfu-util -d [[USB Product IDs|0x1d50:0x5119]] -a rootfs -R -D qtmoko-debian-v24.jffs2

====Preparations on the Connected PC/Laptop====
* To enable connections just by using the hostname <tt>openmoko</tt> edit the <tt>/etc/hosts</tt> and add line  
  192.168.0.202   openmoko
* Enable internet connection via [[USB Networking]] so that the installation of packages will be possible.

==== First Boot ====
After finishing the installation without errors you have to start the FreeRunner and calibrate the  touch screen. Then you see the installed ''QtMoko'' on your device. 
[[Image:qtmokomain.png|200px|thumb|QtMoko after first boot]]

====First Login====
If you want to login to your FreeRunner set up a network connection (see [[USB Networking]]) with USB cable and start:
   desktop# ssh -X -l root 192.168.0.202

The root password is empty so set it for security reason especially when you open the ssh-daemon on the WLAN network interface. Define root password as usual on a linux box with
   neo# passwd
If you have established the internet connection via USB cable then update the repository data:
   neo# apt-get update 
If you want to check if the internet connection is available on your freerunner ping the OpenMoko web server with:
   neo# ping 88.198.93.221
   neo# ping wiki.openmoko.org
If the first ping works and the second doesn't then check the DNS server settings (see [[USB Networking]]).

==== Setting Time and Date ====
Set the time and date on from your linux box with
<pre>
ssh root@openmoko "date -us @`date -u +%s`"
</pre>
If you want to set the time with a NTP Client install the following package, if you have a network connection available (see [[USB Networking]])
<pre>
# apt-get install ntpdate
# ntpdate-debian
</pre>
For further detail see [[Setting Date and Time]].

== Usage ==
=== Login ===
If you want to login to your FreeRunner set up a network connection (see [[USB Networking]]) with USB cable and start:
   desktop# ssh -X -l root 192.168.0.202
or if hostname is defined in <tt>/etc/hosts</tt>
   desktop# ssh -X -l root openmoko
=== Installation of Applications ===
If you want to install applications (e.g. <tt>myapplication</tt>) login on your freerunner 
  # apt-get install myapplication
Replace <tt>myapplication</tt> by the package name of application name you want to start, e.g. if you want to install the command line editor <tt>vim</tt>.
  # apt-get install vim
==== Navit ====
===== Navit Installation =====
If you want to install e.g. the application [[Navit]], you have to install the following packages. Navit needs and X-Server and it will run under [[QX]].
  # apt-get install flite
  # apt-get install unzip
The zip-package is necessary to unzip the [http://www.openmobile.nl/media/download_gallery/navit-qtm.zip navit-qtm.zip] package.  
  # cd /
  # wget http://www.openmobile.nl/media/download_gallery/navit-qtm.zip
During <tt>unzip</tt> you will be asked to replace <tt>/opt/qtmoko/bin/ppp-network</tt>. This has to be done to solve problems with DNS over GPRS. Backup  <tt>ppp-network</tt> file before unzipping <tt>navit-qtm.zip</tt>. 
  # cp /opt/qtmoko/bin/ppp-network /opt/qtmoko/bin/ppp-network.bak
  # unzip navit-qtm.zip
{{Note|Unzip extracts and overwrites the network settings files mentioned above. Due to this fact the usb0 MAC address changes for the USB connection to your freerunner. E.g. under Ubuntu 10.04 the new network interface for usb0 has to configure again}}

Now you have to restart your Freerunner, but you can also try from the commandline of your neo:
  # echo 1 > /proc/sys/vm/overcommit_memory
After restart you can start [[Navit]] under [[QX]].

===== Download Maps =====
Create a folder <tt>MapsNavit</tt> on your SD card
  # mkdir /media/card/MapsNavit
The navit QT package [http://www.openmobile.nl/media/download_gallery/navit-qtm.zip navit-qtm.zip] from http://www.openmobile.nl the <tt>navit.xml</tt> is predefined for benelux maps and will try to load <tt>osm_benelux.bin</tt> that should be store at
  /media/card/MapsNavit/osm_benelux.bin
If you want to use map for another country you can just store a downloaded [[Navit]]-Map in that folder and rename it <tt>osm_benelux.bin</tt>. If the map name should make sense, then you have to edit the <tt>navit.xml</tt>. See [[Navit]]-manual for details. You can find the <tt>navit.xml</tt> at:
  # /usr/share/navit/navit.xml
Create the folder <tt>.navit</tt> in the home directory on your FR and copy <tt>navit.xml</tt> to directory:
  # cd ~
  # mkdir .navit
  # cp /usr/share/navit/navit.xml .navit/navit.xml 
If you have the editor <tt>vim</tt> installed then edit the file at line 376 approx.:
  # vim ~/.navit/navit.xml
If you have downloaded the file <tt>germany.bin</tt> your mapset-tags should look like this:
<pre>
 <!-- Mapset template for openstreetmaps -->
 <mapset enabled="yes">
   <map type="binfile" enabled="yes" data="/media/card/MapsNavit/germany.bin"/>
 </mapset>
</pre>

===== Starting Navit =====
* Open Main Menu by clicking on the green Q-Topia "Q"-Box.
* Open Applications (4 Boxes, red, yellow, green, blue)
* Scroll down and open QX
* Select Navit
* Click on the white Paper Icon on teh bottom left to open the context menu of the QX application.
* Select Launch to start Navit.
* Exit with AUX-Button without stopping navit
=== VoIP ===
QtMoko has an integrated VoIP-Client, which would be perfect to use a SIP-Account to do free of charge mobile communication world wide. But at the moment the integrated VoIP-Client does not work, due to some strange problems in Version v24 (see [http://qtmoko.org/wiki/Main_Page QtMoko-Wiki] for current status of development).

[http://wiki.openmoko.org/wiki/Android_usage Android on Freerunner] has an integrated SIP-Client [[SipDroid]] that has strange audio problems as well (see http://sipdroid.org ).

== Links ==
* [http://qtmoko.org/wiki/Main_Page Qt Wiki]
* [http://sourceforge.net/projects/qtmoko/files/ Qt Download]

[[Category:Qt Moko| ]]
