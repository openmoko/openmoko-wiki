{{Languages|Getting Started with your Neo FreeRunner}}

{| class="wikitable" cellspacing="2" cellpadding="2" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #cccccc; background:#eeeeee; width:100%;floating="center"; "
! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:1px solid #222222; width:75% " |  
 <div align="left">
Thank you for purchasing this Developer release of Neo FreeRunner. The [[Neo FreeRunner]] phone is the second hardware platform to take advantage of [[Openmoko]]. This guide will help you get to know your Neo FreeRunner and how to start using your Neo FreeRunner.
! style="background:#fcfcfc;border-left:1px solid #9999cc;border-right:1px ; border-top:2px solid 75d806; border:1px solid #222222; width:25% " |
[[Image:Freerunner box.png|200px|thumb|Neo FreeRunner Package]]
|}

== The Package Contents ==

{| class="wikitable" cellspacing="2" cellpadding="2" style="padding: 0%; margin:0em 0em 1em 0em; border:1px solid #ffffff; background:#ffffff; width:80%; floating="center"; "
! style="background:#ffffff;border-left:1px solid #ffffff;border-right:1px ; border-top:2px solid ffffff; border:1px solid #ffffff; " |  
<div align="left">
[[Image:GTA02ALL.png|400px|thumb|Inside package]]
|

: [[Image:Circle２.gif|10px]]  Neo FreeRunner
: [[Image:Circle２.gif|10px]]  Stylus
: [[Image:Circle２.gif|10px]]  Battery
: [[Image:Circle２.gif|10px]]  Charger
: [[Image:Circle２.gif|10px]]  USB Cable 
: [[Image:Circle２.gif|10px]]  microSD Card 512MB
|}
</div>

==Getting To Know the Neo FreeRunner==

<div align-center>
<table width="80%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 25px; padding-left: 0.5em;">
</td>
<td style="width: 10px; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:menu8.jpg|370px|thumb|AUX Button and phone jack(From left to right)|center]]</td><td style="padding: 1px 1em 0; background: #ffffff;">
[[Image:menu9.jpg|365px|thumb|Power Button, USB and external GPS Antenna (From left to right)|center]]</td></tr></table>
</div>

<div align-center>
<table width="80%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 50%; padding-left: 0.5em;">
</td>
<td style="width: 50%; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:menu12.jpg|233px|thumb|AUX Back side with battery|center]]</td><td style="padding: 1px 1em 0; background: #ffffff;">
[[Image:menu11.jpg|260px|thumb|Put the SIM card and SD card here|center]]</td></tr></table>
</div>

<div align-center>
<table width="80%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 50%; padding-left: 0.5em;">
</td>
<td style="width: 50%; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:menu13.jpg|233px|thumb|open case from this side |center]]</td><td style="padding: 1px 1em 0; background: #ffffff;">
[[Image:menu14.jpg|250px|thumb|Opened|center]]</td></tr></table>
</div>

===Installing the Micro-SD card, the SIM card, and the Battery ===

# Remove the rear cover of the Neo FreeRunner by first holding the Neo FreeRunner on the side and then use your fingernail to prise off the rear cover at the slot on top of the device.
# Now you should be able to locate the combined SIM and Micro-SD card holder at the bottom of the battery compartment.
# Unlock the SIM card holder by sliding the metal clip down, towards the USB socket, with your fingernail. Use caution, as these parts are delicate and could be damaged by forcing them in the wrong direction.
# Lift up on the SIM card holder.
# The Micro-SD card holder is held in place by a latch on either side.  It is easiest to open the Micro-SD card holder by releasing these latches one at a time rather than by lifting from the middle, as lifting from the middle tends to increase the latching pressure.  A small screwdriver or knife can be used for this.
# Insert the Micro-SD card into the Micro-SD card holder. Note that on the inside of metal part of the holder there are little holding tabs for the card. Slide the card in these holders (on the metal part) before closing the card holder. Note that the electrical contacts should face down and towards the edge of the Neo Freerunner.
# Close the Micro-SD card holder, making sure that both latches of the holder are securely fastened.
# Insert the SIM card into the SIM card holder, taking care to slide inside the two metal tabs in the cover. Note that the electrical contacts should face down and that the cut corner should be closest to the external GPS Antenna Socket.
# Close the SIM card holder and lock it by sliding the metal clip towards the external GPS Antenna Socket on the FreeRunner.
# Insert the battery into the battery compartment, aligning the electrical contacts on the battery with the electrical contacts in the battery compartment.  Insert the side with the electrical contacts first.
# Replace the rear cover on the FreeRunner.

[[Image:FR_SIM_SD_open.jpg|457px|thumb|SIM and SD holders open, with cards in place|center]]

===Charging the Neo Freerunner===

When using the Neo Freerunner for the first time, you should charge the battery completely. The battery can be charged using the provided charger (at 1000mA) or from a powered USB port capable of providing 500mA worth of current.  Most computers will be able to charge the FreeRunner without any problems.

Charging at 100mA takes 6-12 hours and at 500mA takes 1-2 hours. (from [http://openmoko.togaware.com/survivor/Charging.html openmoko.togaware.com])

===The Buttons===

====Power====

Holding the power button brings up a menu allowing you to power on and off the gps, wifi, gsm, and bluetooth antennae, and also to shutdown the device.

====Aux====

Holding the aux button for a second brings up a menu allowing you

* Toggle Fullscreen: Hide and show the title bar
* Swap Orientation: Rotate the screen contents for horizontal and vertical viewing
* Screenshot: Start an application to save an image file of the current screen contents 

===Unlocking the screen===

When the screen is locked, you should see a Matrix-style green graphic with the Openmoko symbol in the middle of the bottom of the screen along with lock and unlock symbols.  If you drag the Openmoko symbol to the unlock symbol at the top then the screen will become unlocked.

=== Accessing the microSD card ===

Mounted at /media/card

=== Importing contacts ===

If you can export your contacts to VCard format, either multiple files or single file containing all of them, you may use the script on [[Import Vcf Contacts]] page to bring them to Neo.

=== Where to go when things go wrong ===

You may ask for help on the support mailing list : more details at https://lists.openmoko.org/mailman/listinfo/support

[[Freerunner_Hardware_Issues]]

==Connect to the Neo FreeRunner By USB Networking==

Connect the Neo FreeRunner to a GNU/Linux host with the USB cable. For Mac OS X please refer to [[MacOS_X]]. For Windows XP and Vista please refer to [[Neo1973_and_Windows]] (which also works for the FreeRunner). After booting into the Openmoko image there will be a new interface, usb0, on your GNU/Linux host.

=====Manual Method=====
Type in the following commands in the terminal of a GNU/Linux host:

 ifconfig usb0 192.168.0.200 netmask 255.255.255.0
 ssh root@192.168.0.202

Press Enter to get by the password.

=====Automatic Method=====
*Debian and derivatives (Ubuntu, Sidux etc.)
Edit /etc/network/interfaces:

 auto usb0
 iface usb0 inet static
 address 192.168.0.200
 netmask 255.255.255.0

*Gentoo 
Edit /etc/conf.d/net:

 config_usb0="192.168.0.200/24"

Restart the networking service ('/etc/init.d/networking restart' for Debian-based systems) and then type the following command in the terminal of the GNU/Linux host:

 ssh root@192.168.0.202

Press Enter to get by the password.

{{note|
If your network device is using the ip range 192.168.0.x you may have to use the following command before you are able to connect

 route add -host 192.168.0.202 dev usb0 }}

=====Making things even more automatic=====
If you don't want to remember the IP address of your phone then you can create an alias by adding the following line to your /etc/hosts:

 192.168.0.202   openmoko

Now it should be possible to connect to your phone using the following command:

 ssh root@openmoko

The above only gets you a Secure Shell connection to the Openmoko device, it does not allow the Openmoko device to connect to the Internet.  If you are interested in connecting the device to the internet then check out the [[USB_Networking]] section.

=====Allow FreeRunner to Connect to Internet via USB=====
For the FreeRunner to access the internet through the USB connection, you will also need to make modifications on the PC it is connecting through.

In Ubuntu:

Within /etc/network/interfaces, change your interface setup to this:

 auto usb0
 iface usb0 inet static
    address 192.168.0.200
    netmask 255.255.255.0
    network 192.168.0.0
    up iptables -A POSTROUTING -t nat -j MASQUERADE -s 192.168.0.0/24 &
    up echo 1 > /proc/sys/net/ipv4/ip_forward &
    up iptables -P FORWARD ACCEPT &
    down iptables -D POSTROUTING -t nat -j MASQUERADE -s 192.168.0.0/24 &

In Fedora:

Set /etc/sysconfig/network-scripts/ifcfg-usb0 to this:
 DEVICE=usb0
 IPADDR=192.168.0.200
 NETMASK=255.255.255.0

Set /etc/sysconfig/network-scripts/ifup-usb to this:
 #!/bin/bash
 
 . /etc/init.d/functions
 
 cd /etc/sysconfig/network-scripts
 . ./network-functions
 
 [ -f ../network ] && . ../network
 
 CONFIG=${1}
 
 need_config ${CONFIG}
 
 source_config
 
 NETBITS=`ipcalc -p ${IPADDR} ${NETMASK} | awk -F'=' '{print $2;}'`
 
 /sbin/ip addr flush dev ${DEVICE} 2>/dev/null
 /sbin/ip link set dev ${DEVICE} up
 /sbin/ip addr add dev ${DEVICE} ${IPADDR}/${NETBITS}
 
 /sbin/iptables -I POSTROUTING -t nat -j MASQUERADE -s ${IPADDR}/${NETBITS}
 /sbin/sysctl net.ipv4.ip_forward=1
 /sbin/iptables -I FORWARD -s ${IPADDR}/${NETBITS} -j ACCEPT
 /sbin/iptables -I FORWARD -d ${IPADDR}/${NETBITS} -j ACCEPT

Set /etc/sysconfig/network-scripts/ifdown-usb to this:
 #!/bin/bash
 
 . /etc/init.d/functions
 
 cd /etc/sysconfig/network-scripts
 . ./network-functions
 
 [ -f ../network ] && . ../network
 
 CONFIG=${1}
 
 need_config ${CONFIG}
 
 source_config
 
 NETBITS=`ipcalc -p ${IPADDR} ${NETMASK} | awk -F'=' '{print $2;}'`
 
 /sbin/iptables -D FORWARD -d ${IPADDR}/${NETBITS} -j ACCEPT
 /sbin/iptables -D FORWARD -s ${IPADDR}/${NETBITS} -j ACCEPT
 /sbin/sysctl net.ipv4.ip_forward=0
 /sbin/iptables -D POSTROUTING -t nat -j MASQUERADE -s ${IPADDR}/${NETBITS}
 
 /sbin/ip link set dev ${DEVICE} down
 /sbin/ip addr flush dev ${DEVICE} 2>/dev/null

If you are using NetworkManager, restart it and enable the usb device from its menu, otherwise it will disable your connection shortly after you enable it.
 /sbin/service NetworkManager restart

=====Updating DNS=====

Once your PC is setup, then edit /etc/network/interfaces on your FreeRunner and modify the code from this:

 iface usb0 inet static
        address 192.168.0.202
        netmask 255.255.255.0
        network 192.168.0.0
        gateway 192.168.0.200
        up echo nameserver 192.168.0.200 > /etc/resolv.conf

to something that points to a real name server, like a public DNS system from OpenDNS, like this:

 iface usb0 inet static
        address 192.168.0.202
        netmask 255.255.255.0
        network 192.168.0.0
        gateway 192.168.0.200
        up echo nameserver 208.67.222.222 > /etc/resolv.conf
        up echo nameserver 208.67.220.220 >> /etc/resolv.conf

Note: vi appears to be the only text editor available by default.  See [http://www.cs.colostate.edu/helpdocs/vi.html basic vi commands] for help.

On the factory loaded OM2007.2 image, run the following to restart networking for the DNS changes to take effect:

 /etc/rc0.d/K40networking restart


If you are still unable to get the freerunner access to the internet, and are using Mandriva and/or happen to have your LAN on 192.168.0.0/24, [[User:Linuxpaul|this page]] may help you.

==The Architecture==

There are three layers to the software on the FreeRunner:

===uBoot===

Think of u-boot as a combination of the BIOS and Grub on a PC.

===Kernel===

The Linux kernel.

===Root Filesystem===

The rest of the system

==Updating the software==

In order to keep the FreeRunner up-to-date with the latest features and bug-fixes, it is advisable update the software at regular intevals. There are two main methods of doing this.

===opkg===

Assuming that your FreeRunner can access the internet (see above), the kernel and other packages can be updated with

 # opkg update
 # opkg upgrade

The first updates the repository information, telling opkg what packages are available. The second upgrades all packages for which a newer version is available. At the moment, some signature files are missing, which opkg complains about, but this is cosmetic.

It will be possible in the future to update uboot with opkg, but this has not yet been implemented

===Flashing===

uboot, the kernel and the root filesystem can all be flashed to update them. See below for how. For uboot, this is the only possibility. The advantage of flashing the kernel, rather than using opkg seems to be speed.

The disadvantage of flashing the root file system is that it wipes out all local modifications, including /home. If /home is moved to the SD disk, this is no longer a problem.

==Un-crippling the 2007.2 image==

The stock [[Openmoko2007.2]] image flashed onto the Neo FreeRunner is really just the bare bones. For example, you don't have the clock and the quick-launch icons showing. Here's how you can change that:

 # dbus-launch gconftool-2 -t boolean -s /desktop/poky/interface/reduced false
 # /etc/init.d/xserver-nodm restart

If you rather have a regular clock instead of the digital one, do this instead:

 # dbus-launch gconftool-2 -t boolean -s /desktop/poky/interface/reduced false
 # dbus-launch gconftool-2 -t boolean -s /desktop/poky/interface/digital_clock false
 # /etc/init.d/xserver-nodm restart

More information about today screen customization at [[Today/2007.2]].

With either clock, you may wish to set the correct [[Timezone]].

Also, if you prefer having a full keyboard, see [http://www.ginguppin.de/node/15 these instructions].

===GPS===

Simple guide to get going with GPS:

 # opkg install gpsd

On the FreeRunner,

 # echo "GPS_DEV=\"/dev/ttySAC1\"" > /etc/default/gpsd

and restart gpsd, the gps daemon, with

 # /etc/init.d/gpsd restart

To test GPS, you can use agpsui:

 # opkg install openmoko-agpsui

For a nice map, try tangoGPS:

 # opkg install tangogps

More information on [[GPS]] page.

=== GPRS ===

See [[Manually using GPRS]]. According to some [http://lists.openmoko.org/pipermail/support/2008-July/000003.html posts], GPRS might be broken currently (2007.2), though. Any updates welcome.

=== WLAN ===

See [[GTA02 WLAN]].

===Recommended software===

For a Media Player:

 # opkg install openmoko-mediaplayer2
 # wget http://abraxa.dyndns.org:81/random/openmoko-mediaplayer-theme.tar.bz2
 # tar xjf openmoko-mediaplayer-theme.tar.bz2 -C /usr/share/themes/Moko/gtk-2.0
 # rm openmoko-mediaplayer-theme.tar.bz2

If you want a basic image viewer, have a look at the one from the gpe suite:

 # opkg install gpe-icons gpe-gallery

To obtain the standard web browser, use:

 # opkg install openmoko-browser2

An alternative browser, minimo, offers many more features.  
First download and unpack it on your GNU/Linux host:

 # wget http://www.ginguppin.de/files/minimo.tar.bz2
 # tar jvxf minimo.tar.bz2

Copy it over to the FreeRunner:
 # scp minimo_* root@openmoko:/tmp

Then on the FreeRunner:
 # opkg install /tmp/minimo_0.02\+cvs20070626-r0_armv4t.ipk

There are tons more apps you can install - check out the [[Repositories]] for a list of packages.

==Booting the Neo Freerunner==

You can boot your Neo FreeRunner in the following ways:

: [[Image:Circle２.gif|10px]]    You can power it up into an Openmoko image directly (default, when powered-on for the first time). 

: [[Image:Circle２.gif|10px]]    You can boot it into the [[Bootloader|U-Boot bootloader]] via [[NAND Flash]].

: [[Image:Circle２.gif|10px]]    You can boot it into U-Boot via NOR Flash.

Booting the device into NAND and NOR Flash allows you to update the kernel and root filesystem.

====Start the Openmoko Image====

<div align-center>
<table width="100%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 25px; padding-left: 0.5em;">

</td>
<td style="width: 10px; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:Menu2.jpg|200px|right|thumb]]</td><td style="padding: 1px 1em 0; background: #eeeeee;">
Press and hold Power button for about 8 seconds, until the Openmoko splash screen turns up.  You may now release the Power button and the Neo FreeRunner will continue to boot into the Openmoko Image.

</td></tr></table>
</div>

====Log into U-Boot in the NAND Flash====

<div align-center>
<table width="100%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 25px; padding-left: 0.5em;">

</td>
<td style="width: 10px; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:Menu7.jpg|200px|right|thumb]]</td><td style="padding: 1px 1em 0; background: #eeeeee;">
Press and hold Power button, then press and hold AUX button for about 5 to 8 seconds. You should see the boot menu for the NAND Flash.  Press the AUX button to select one of the options and then press the Power button to execute.
</td></tr></table>
</div>

====Log into U-Boot in the NOR Flash====

<div align-center>
<table width="100%" style="clear: both; border: 1px solid #ffffff; border-collapse: collapse; padding: 0.2em; margin: 0; font-size: 100%; margin: 0 1px;">
<tr valign="top" style="background: #ffffff">
<td style="width: 25px; padding-left: 0.5em;">

</td>
<td style="width: 10px; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #ffffff;">[[Image:Menu6.jpg|200px|right|thumb]]</td><td style="padding: 1px 1em 0; background: #eeeeee;">

Press and hold the AUX button, then press and hold the Power button. Then, release the AUX button. You should see the boot menu for the NOR Flash.  This option is usually used by developers or when flashing the FreeRunner.  If you cannot log into U-Boot in NAND then you can log into U-Boot in the NOR Flash either. 
</td></tr></table>
</div>

{{note| There are six options you can choose when you log into the NOR Flash.
1. Boot

2. [[Boot from sd card|Boot from MicroSD]]

3. Set console to USB 

4. Set console to Serial

5. Reset

6. Power off}}

{{note|The term ''Logging in'' used in this context means to turn on the device using the described method, and leaving it at the U-Boot menu. To avoid the device automatically booting, tap the AUX key to move the selector bar. Note also that the device will '''not''' automatically turn off while flashing is in progress.
}}

==Flashing the Neo FreeRunner==
As Openmoko development continues, Openmoko regularly releases updated versions of the Openmoko root filesystem, the kernel, and the[[Bootloader| U-Boot]]. These may be programmed into the Flash memory of Neo FreeRunner. You can use the USB cable and Openmoko provided tool to flash Neo FreeRunner.

{{note|The Openmoko software team builds images daily. If you want to use the latest images, you can download the image from the daily build, but we recommend you download the most stable image from http://downloads.openmoko.org/releases/Freerunner/. Images here have been tested by the test team.

More about current Images: http://wiki.openmoko.org/wiki/Latest_Images}}

===Step 1. Download the DFU-util===

You can download the flashing tool from: 
http://downloads.openmoko.org/releases/Freerunner/dfu-util

On the GNU/Linux host you can use the following command to download the dfu-util:
 wget http://downloads.openmoko.org/releases/Freerunner/dfu-util

Afterwards you have to change the rights on the file:
 chmod a+x dfu-util

===Step 2. Flashing the Kernel===

{| class="wikitable" cellspacing="2" cellpadding="2" style="padding: 0%; margin:0em 0em 1em 0em; border:0px solid #ffffff; background:#ffffff; width:100%;floating="center"; "
! style="background:#ffffff;border-left:1px solid #ffffff;border-right:1px ; border-top:2px solid #ffffff; border:1px solid #ffffff; width:75% " |  
<div align="left">
[[Image:menu15.jpg|thumb|Log into U-Boot in NOR Flash, connect your Neo with Linux Host via USB cable]]

Before you execute the following command, please log into U-Boot in the NOR Flash. The Neo FreeRunner needs to be at the NOR boot menu for flashing.  You will then need to connect your Neo with the GNU/Linux host via USB cable.

You can download the kernel from 
http://downloads.openmoko.org/releases/Freerunner/

Type in the following command in the terminal on a GNU/Linux host. On some systems you need to be root before this will work and on Ubuntu you must preface the command with "sudo" or you will get the following error: "Cannot claim interface: could not claim interface 2: Operation not permitted"
 ./dfu-util -a (partion name) -R -D (download image file name)

ex:

 ./dfu-util -a kernel -R -D uImage-2.6.24+git20080424-om-gta02.bin

Press Enter to execute the command.

When flashing succeeds the following will be shown:

status(0) = No error condition is present<br>
Done!</div>
|}

{{note| The meaning of the parameters you specified:
-a  --alt alt Specify the altsetting of the DFU interface by name or by number<br>
-R  --reset Issue USB Reset signalling once we're finished<br>
-D  --download file Write firmware from<file> into device <br>
}}

===Step 3. Flashing the Root Filesystem ===
You can download the root filesystem from:
http://downloads.openmoko.org/releases/Freerunner/

Type the following command in the terminal of a GNU/Linux host. On some systems you will need to be root.

 ./dfu-util -a rootfs -R -D openmoko-devel-image-fic-gta02.jffs2

When flashing succeeds the following will be shown:

status(0) = No error condition is present<br>
Done!

==Appendix==
If you want to know more about the Neo FreeRunner then you can get more information in the following topics:

* [[GTA02 Openness]]
* [[Neo FreeRunner]]
* [[Neo FreeRunner GTA02 Hardware]]
* [[FreeRunner/Buttons and LEDs]]
* [[Latest Images]]
* [[Distributions]]

To search this wiki with Google, use the following search term:

 <search term> site:http://wiki.openmoko.org/wiki/

An excellent tool for searching all the openmoko mailing lists is http://openmoko.markmail.org/

[[Category:GTA02 Hardware]]
