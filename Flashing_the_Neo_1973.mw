This describes how to update your openmoko to the latest software. We'll update the kernel and the root filesystem, but not the u-boot (I do not want to brick my machine).

Ok... so new uboot is neccessary, because otherwise you get kernel crashes later.

Neccessary files are at http://buildhost.openmoko.org/tmp/deploy/images/ .

Download dfu-util, openmoko-devel-image-fic-gta01-20070501054014.rootfs.jffs2 , 
uImage-2.6.21.1-moko10-r0_0_1883_0-fic-gta01.bin  (you may want to take latest versions when they appear).

(u-boot-gta01bv3-r5_9877d7dcd1eebe61aa5d8b8ffe9c048ea426e6f6_0_1910.bin for phase0 machine).

You'll need to boot your openmoko into uboot menu (hold emergency button while pressing power button). Unplug all other usb devices from the host.

Use ./dfu-util -a 1 -R -D u-boot-gta01bv3-r5_9877d7dcd1eebe61aa5d8b8ffe9c048ea426e6f6_0_1910.bin to update the uboot. Yes, it is mandatory.

Use ./dfu-util -a 3 -R -D ./uImage-2.6.21.1-moko10-r0_0_1883_0-fic-gta01.bin to update the kernel.

Use ./dfu-util -a 5 -R -D ./openmoko-devel-image-fic-gta01-20070501054014.rootfs.jffs2 to update the root filesystem. 

Old versions of uboot are buggy: You may have to press the aux button few times so that machine does not sleep while flashing. It also does not erase rootfs before flashing it... to do that, do minicom /dev/ttyACM0, then nand erase clean rootfs .

Good luck!
