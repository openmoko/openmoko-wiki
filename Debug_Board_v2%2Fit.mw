La [[Debug Board/it | pagina Debug Board]] fornisce informazioni sull'architettura della seconda versione della [[Debug Board/it | Debug Board per il Neo1973]].

[[Image:Debugboard v2 diagram.png|left|500px|Architecture Diagram]]

[[Image:Neo1973 debugboard v2 top annotated.jpg|left|500px|Annotated PCB Photograph]]


== Overview ==

La [[Debug Board/it | debug board]] fornisce i seguenti componenti chiave.

* [[Debug Board/it#Hub USB | Hub USB]]
* [[Debug Board/it#JTAG attraverso l'FT2232 | JTAG attraverso l'FT2232]]
* [[Debug Board/it#Porta Seriale | Porta Seriale]]

=== Hub USB  ===

Questo hub alimentato dal bus 
* si connette al laptop usando la porta di upstream
* si connette  all'FT2232D per la JTAG e per la console seriale sulla porta di downstream 1
* si connette ad una porta USB-A libera usando la porta di downstream 2
* si connette al telefono usando la porta di downstream 3

Usando l'hub, e' possibile avere accesso al telefono, alla JTAG ed alla seriale simultaneamente, attraverso un unico cavo USB.

E' anche possibile ricaricare il telefono (carica lenta a 100mA) usando la porta di downstream.

Per le funzionalita' ISB hub, viene utilizzato l'integrato TUSB2046B.

=== JTAG attraverso l'FT2232 ===

Fondamentalmente, abbiamo integrato un adattatore USB-JTAG simile a quello [Amontec JTAGkey-tiny].  Il reference design che abbiamo utilizzato (Grazie a Joern!) puo' essere trovato su http://www.oocdlink.com

In questo modo abbiamo ottenuto la possibilita' di debugging tramite JTAG, a circa 150 volte la velocita' della [[wiggler]]

La porta JTAG e' attaccata con
* il telefono (attraverso il cavo flessibile di debug)
* Un connettore a 20-pin usando il pinout ARM-JTAG standard
** questo permette all'utente di utilizzare questo dispositivo come un adattatore JTAG anche con altri dispositivi basati su ARM

=== Porta Seriale ===

Invece di utilizzare  una vera porta RS232, abbiamo voluto utilizzare un integrato per convertite l'USB in seriale,
come l'FT232 o il PL2303.   

Appena si accende, possiamo anche usare la seconda porta dell'FT2232 contemporaneamente alla JTAG.  Quindi non sono necessari altri FT232 o PL2303.

[[Category:Neo1973 Hardware Debugging]]

<span id="bottom"></span>
{{Languages|Debug_Board}}
