Le guide des quelques premières étapes pour ceux qui viennent de recevoir leur Néo1973.

== Matériel ==

=== Insertion de la batterie ===

Voir [[Disassembling Neo1973]].

=== Allumage du téléphone ===
[[Image:Neo1973_uboot_splash.jpg|200px|thumb|Écran de chargement]]
Il suffit d'appuyer sur le bouton d'allumage ( ça dépend de la version de votre [[u-boot]], vous pouvez avoir à appuyer pendant 5 secondes ) pour lancer le bootloader, puis le kernel, et vous pouvez maintenant profiter de X/OpenMoko !

Une fois que vous avez pressé le bouton d'allumage assez longtemps, le vibreur lance une courte impulsion et le rétro-éclairage s'allume. Vous pouvez maintenant relacher le bouton d'allumage et regarder le téléphone se lancer.

Si la batterie n'est pas assez chargée, le téléphone ne démarrera pas, sauf si le cable USB est branché.

=== Extinction du téléphone ===

==== Pendant le mode bootloader, ou si le téléphone a planté ====

Si vous pressez le bouton d'allumage pendant 9 secondes, le téléphone s'éteindra. Vous pouvez le voir par le fait que le rétro-éclairage s'éteigne.

==== Pendant le fonctionnement du système Linux complet avec espace utilisateur ====

Dans ce mode, une pression de 5 secondes sera suffisant. Après ça le processus init prendra soin d'éteindre correctement le téléphone, ce qui prend à peu près 20 secondes de plus. Le serveur X sera tué, vous verrez une console et le téléphone s'éteindra - tout comme un vrai système Linux.

=== Chargement de la batterie ===

Le [[Neo1973]] possède deux modes de chargement : un mode de charge à 100mA ( nommé mode de précharge ) et un à 500mA ( nommé charge rapide ). La charge se fait toujours par le connecteur USB. Vous pouvez utiliser n'importe quel cable USB ( USB-A vers USB-mini-B) pour connecter le téléphone à n'importe quel port USB.

==== Pendant le u-boot ====

Pendant que vous êtes dans le mode u-boot, le téléphone se charge uniquement avec le mode 100mA par défaut. ( Ça va changer dans une des prochaines révisions ).

Vous pouvez aussi utiliser la console du u-boot pour activer le mode de charge rapire. Voir [[U-boot#Battery_charger_related]] pour plus d'infos.

==== Pendant que Linux tourne ====

Dès que le téléphone sera connecté par le cable USB, il se rechargera. Cependant le mode de charge par défaut ( 100mA ) sera trop faible si vous voulez utiliser le téléphone et le recharger en même temps. 

Si votre port USB est capable de délivrer un courant de 500mA, le téléphone se configurera pour utiliser le mode à 500mA. Vous pouvez le voir par la ligne suivante dans le log du noyau
 usb0: full speed config #1: 500 mA, Ethernet Gadget, using CDC Ethernet

=== Insertion de la carte SIM ( optionnel ) ===

L'emplacement est situé juste derrière la batterie. Le porte-carte est doté de flèches indiquant dans quel sens il faut le pousser pour   l'ouvrir - ne forcez pas dessus lorsqu'il est fermé car vous pourriez le casser. Insérez la carte SIM de sorte que les garnitures fassent le contact et poussez le support fermement jusqu'à ce qu'il fasse un clic, puis bloquer le - sinon la carte ne sera pas détectée. 

Pour vérifier si la carte SIM est bien insérée ( sous Linux ), vous pouvez regarder dans les logs gsmd ou utiliser les instructions détaillées dans la page [[Manually using GSM|Utliser le GSM manuellement]] et tester la commande ''AT+CIMI''.

== Avoir un accès au terminal ( console ) du téléphone ==

=== En utilisant l'émulateur de terminal et le clavier à l'écran ===

"Cliquer" (en utilisant un stylet) sur l'icône en forme de flèche dans le coin supérieur gauche pour faire apparaître un menu déroulant avec comme options: "Media", "Settings", "Utilities" et "Desktop". Choisissez "Utilities->Panel->Input Manager", et une icône en forme de clavier devrait apparaître dans la bar du haut. A tout moment, vous pouvez utiliser le clavier virtuel en sélectionnant cette icône.

With newer images, the keyboard comes up when you tap the white box in the top bar.

From the desktop, choose "Active tasks->rxvt" to get a root shell.

Terminal is in the top level menu in recent images.

=== En utilisant une émulation Ethernet par le cable USB ===

Le [[Kernel|noyau]] Linux standard du Neo1943 supporte le "cdc_ether USB gadget", c'est-à-dire une implémentation standard de l'émulation de périphérique Ethernet sur USB.

Dès que le noyau est lancé, et que vous avez votre téléphone connecté via l'USB, vous devriez avoir un périphérique nommé '''usb0''' vote hôte.

Le téléphone aura l'adresse IPv4 192.168.0.202/24. Vous pouvez lancer `ifconfig` dans le terminal du téléphone pour le vérifier (ceci est optionnel et à titre informatif. Si ça ne fonctionne pas, suivez les instructions ci-dessous).

Si vous branchez un câble USB dans un ordinateur tournant sous Linux, vous verrez probablement le module noyau "cdc_ether" se charger et une interface réseau usb0 devrait apparaître.

Sur le '''PC hôte''', vous devez configurer votre interface en 192.168.0.200 en utilisant
 # ifconfig usb0 192.168.0.200 netmask 255.255.255.0

Ensuite, vous devriez être capable d'interroger la machine avec
 # ping 192.168.0.202

Et finalement pouvoir vous connecter en ssh 
 # ssh root@192.168.0.202

Une fois que vous aurez appuyé sur 'enter' (mot-de-passe vide), vous devriez avoir une session en tant que root.

Voir [[USB_Networking]] pour plus de détails, qui inclut les instructions sur la marche à suivre pour la configuration automatique du masquerading (traduction d'adresse ip, voir [[http://fr.wikipedia.org/wiki/Network_address_translation NAT]]) afin que votre téléphone puisse accéder à internet via le PC hôte.

=== En utilisant la carte de debug / port série / JTAG ===

Voir [[Debug Board#Usage_Instructions]]

== Avoir accès à la console du bootloader ==

Voir [[u-boot#Using_usbtty_from_Linux]]

== Commandes utiles sous Linux ==

=== Suspending ===

Writing "mem" into ''/sys/power/state'' tells Linux to suspend - it will enter a low power mode where only the GSM and RAM are powered up and the CPU sleeps.  It will persist in this state until a wake-up event arrives.  Some currently enabled wake-up events are: AUX or POWER key press, USB cable detect.

If you're connected over ssh, sshd will stop responding when the OS suspends, so to avoid locking up your ssh client, use the command
 # (sleep 1; echo mem > /sys/power/state) & exit

=== Initial backup ===

After getting your new Neo1973 booted for the first time you might want to make a back up of the original flash chip contents on your PC, before you overwrite the flash with a custom image or just update to a newer build.  This is a good idea because there are parts in the root filesystem that can't be distributed over internet so they are only found in the shipped ROM (see the [[GPS]] driver).  One easy way to back up all of the Flash, that doesn't require installing any special software, is with ''netcat'' over the [[USB Networking|USB ethernet]].  The following commands can be used for that.
{|
! On the host !! On the target
|-
|<pre>
$ netcat -l -p 20000 > mtdblock0
$ netcat -l -p 20000 > mtdblock1
$ netcat -l -p 20000 > mtdblock2
$ netcat -l -p 20000 > mtdblock3
$ netcat -l -p 20000 > mtdblock4
</pre>
|<pre>
# cat /dev/mtdblock0 | nc 192.168.0.200 20000
# cat /dev/mtdblock1 | nc 192.168.0.200 20000
# cat /dev/mtdblock2 | nc 192.168.0.200 20000
# cat /dev/mtdblock3 | nc 192.168.0.200 20000
# cat /dev/mtdblock4 | nc 192.168.0.200 20000
</pre>
|}

This stores the five NAND partitions in files named mtdblock*.  Knowing the partition layout (u-boot "mtdparts" command or Linux dmesg) you can restore the whole flash with it.

=== Where to from here ===

You'll probably want to play with some of the interesting hardware in this device. Obviously, you can explore the applications available through the touch-screen interface. But for those who prefer doing things more in the raw from a shell prompt, you can [[Manually_using_GSM | manually use GSM]] or you can start playing with the [[GPS]].

<span id="bottom">{{Languages|Getting_Started_with_your_Neo1973}}</span>

[[Category:Documentation]]
[[Category:Neo1973_Phase_1_related]]
