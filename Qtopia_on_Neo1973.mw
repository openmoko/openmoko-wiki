{{Languages|Qtopia_on_Neo_1973}}

== Flashing Qtopia images into Neo's NAND flash ==
Generic NAND flashing notice: Flash chunks to be flashed must be erased or cleared first (a write to a NAND flash can only set, but not clear bits), you either need to have a recent uboot (most GTA01v4 owner should have that already), or you have to erase or clean the NAND partition using [[nand erase]].

Get "Qtopia on Neo Flash Image and kernel" [http://www.qtopia.net/modules/devices/openmoko.php from here]. Currently the flash tarball has the 2.6.21 openmoko kernel and a Qtopia phone edition jffs2 flash image cross-compiled for the Neo. 

Newer unofficial Qtopia images can be found in the ScaredyCat [[repositories]], but they may not ask for a PIN, so if your SIM needs a PIN to be accessible, only the 2007-09-18 preview image from qtopia.net will be able to access your SIM. It will however not be stable enough to be useable.

== Dual-booting between Qtopia and X ==

Both examples described here require you to reformat your MicroSD card to ext3, so this is the first step for both:

{{warning|The following step will reformat your MircoSD card with the ext3 filesystem. We need it because we need support for symbolic or/and static links, which other filesystems like FAT do not support directly. After reformatting, no data on the card will be accessible to you anymore, so create good backups of anything which you need before starting!}}

Then ssh to your neo and reformat your MicroSD card with:
 umount /dev/mmcblk0p1
 mkfs.ext3 /dev/mmcblk0p1
 mount /dev/mmcblk0p1

=== Installing Qtopia into an openmoko rootfs ===

On [http://www.qtopia.net/modules/devices/openmoko.php], click "Developer root filesystem". Then extract opt/Qtopia and the qpe init script and copy both to the mmc card of your neo:

 tar xzf ficgta01-qtopia-developer-rootfs.tgz opt/Qtopia etc/init.d/qpe
 mv opt/Qtopia etc/init.d/qpe . && rm -r opt etc
 tar czf Qtopia.tar.gz Qtopia qpe
 scp Qtopia.tar.gz root@192.168.0.202:/media/card/

Log in to your Neo and unpack the archive and install it:

 cd /media/card
 tar xzf Qtopia.tar.gz
 mkdir -p /opt
 ln -s /media/card/Qtopia /opt/Qtopia
 mv qpe /etc/init.d

Now kill the X server and gsmd and start Qtopia (this can take some time):

 /etc/init.d/xserver-nodm stop
 /etc/init.d/gsmd stop
 /etc/init.d/qpe start

Now, in theory, it should be possible to could create a new entry in the [[uboot]] boot menu which adds a new boot argument to the kernel, say "qtopia=1" and you could could write a script which checks that boot parameter by checking if "$qtopia" is set to "1" or by checking /proc/cmdline and then boot Qtopia instead of X.

=== Installing Qtopia on the SD card ===

* format your SD card with ext3 and mount it (see above)
* unpack rootfs from qtopia-4.3.0-preview-neo-flash.tgz to SD card (see above)
* copy the uImage-2.6.22.5-moko11-r2-fic-gta01.bin kernel to the boot/ on SD card and rename it to uImage
* put a 'Boot from SD' menu item in uboot menu as explained here: [[Booting_from_SD#Step_3:_Add_uboot_boot_entry]]

=== Build your own ===
If you want to build qtopia for yourself you can download the [ftp://ftp.trolltech.com/qtopia/tech-preview/ technical preview] or [ftp://ftp.trolltech.com/qtopia/snapshots/ snapshots]

== Tips ==
Most things seem to work out of the box, however you may need to use the following command to get audio:
 alsactl -f /etc/gsmhandset.state restore
Or put this command in /etc/init.d/qpe line 64

Do not switch themes.  Only the default theme is usable.  For example, once you switch themes, the lock feature continues to work, but only if you unlock using the smallest # keypad in the world.

Suspend support is very flaky.  The neo often shuts off from a suspend state.  It will not wake from suspend for an incoming call or text message (someone try setting an alarm and report results here).  To turn suspend off (this will of course use the batteries very quickly), hit the down arrow next to the suspend setting in the power management until it says "Off".

When using the virtual keyboard, do a quick flick up or down over the keyboard to access numbers/symbols/capitals.

In summary, Qtopia on the Neo1973 is much closer to being ready than OpenMoko as of this writing.  However, sound and suspend support prevent it from being at all useful as a cell phone (as a landline that doesn't ring but instead vibrates, it works ok).

The biggest issue for using Qtopia on the Neo1973 is currently PIN entry. On the Greenphone it's done thru the numberic keypad, but the Neo193 has none, so Qtopia has to use some other way of entering the PIN. The 3.4.0-preview flash image uses a tiny graphical keypad where you are able to enter the PIN, but none of the newer images have it and so it's not possible to access SIM cards which need a PIN.

The [http://www.qtopia.net/modules/newbb_plus/viewtopic.php?topic_id=473&forum=4 Qtopia forum area on the FIC GTA01] might be helpful, but it is preferred that you update this section with issues and fixes which you find.

== Screenshots ==

{|
|-
|[[Image:Qtopia001.png|thumb|center|240px]]
|[[Image:Qtopia002.png|thumb|center|240px]]
|[[Image:Qtopia003.png|thumb|center|240px]]
|-
|[[Image:Qtopia004.png|thumb|center|240px]]
|[[Image:Qtopia005.png|thumb|center|240px]]
|[[Image:Qtopia006.png|thumb|center|240px]]
|}

== Videos ==

 http://www.youtube.com/watch?v=YW5q8SpY7t4
 http://www.youtube.com/watch?v=iOG_mtSEMgs

For full size videos, 346 MiB:

 http://linuxtracker.org/download.php?id=4613&name=qt_on_neo1973_videos.torrent
