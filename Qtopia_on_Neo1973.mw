{{Languages|Qtopia_on_Neo_1973}}

== Installation ==

=== Qtopia image ===
Get "Qtopia on Neo Flash Image and kernel" [http://www.qtopia.net/modules/devices/openmoko.php from here]. Currently the flash tarball has the 2.6.21 openmoko kernel and a Qtopia phone edition jffs2 flash image cross-compiled for the Neo. 

Newer unofficial Qtopia images can be found in the ScaredyCat [[repositories]].

It appears you must clear the flash chunks first (if you have not updated your uboot.  If you have, you may skip this step). Get into uboot console [http://wiki.openmoko.org/wiki/Uboot#Accessing_the_bootloader_prompt] and enter 

 nand erase kernel
 nand erase rootfs

Download and use dfu-util as [[Flashing_openmoko|normal]] and the ip address and cidr are the same as the openmoko build (192.168.0.202/24) :D - Simple, Eh?

=== Qtopia AND OpenMoko Option 1 ===
Why choose when you can have both ;)

If you do not already have a recent version of OpenMoko on your Neo1973, have a look a [[Flashing openmoko]].

{{warning|The following step will reformat your MircoSD card with the ext3 filesystem. We need it because we need support for symbolic or/and static links, which other filesystems like FAT do not support directly. After reformatting, no data on the card will be accessible to you anymore, so create good backups of anything which you need before starting!}}

Then ssh to your neo and reformat your MicroSD card with:
 umount /dev/mmcblk0p1
 mkfs.ext3 /dev/mmcblk0p1
 mount /dev/mmcblk0p1

On your desktop: Get "Developer root filesystem" [http://www.qtopia.net/modules/devices/openmoko.php from here]. Get the opt/Qtopia folder plus the qpe init script out of the archive repack and copy it to your neo. One could do this like this:
 tar xzf ficgta01-qtopia-developer-rootfs.tgz opt/Qtopia etc/init.d/qpe
 mv opt/Qtopia etc/init.d/qpe . && rm -r opt etc
 tar czf Qtopia.tar.gz Qtopia qpe
 scp Qtopia.tar.gz root@192.168.0.202:/media/card/

On your neo again: unpack the archive you just copied and link the Qtopia folder to /opt/Qtopia. Then move the init script to /etc/init.d/:
 cd /media/card
 tar xzf Qtopia.tar.gz
 mkdir -p /opt
 ln -s /media/card/Qtopia /opt/Qtopia
 mv qpe /etc/init.d

Now kill the x server and gsmd and start Qtopia (this can take some time):
 /etc/init.d/xserver-nodm stop
 /etc/init.d/gsmd stop
 /etc/init.d/qpe start

Where from here? You could put the last step in a script and start it from a terminal on your phone. But much nicer would be if you could choose between both interfaces on init time and have some small application in Qtopia/OpenMoko to switch.

=== Qtopia AND OpenMoko Option 2 ===

* format your SD card with ext3 and mount it (see above)
* unpack rootfs from qtopia-4.3.0-preview-neo-flash.tgz to SD card (see above)
* copy the uImage-2.6.22.5-moko11-r2-fic-gta01.bin kernel to the boot/ on SD card and rename it to uImage
* put a 'Boot from SD' menu item in uboot menu as explained here: [[Booting_from_SD#Step_3:_Add_uboot_boot_entry]]

=== Build your own ===
If you want to build qtopia for yourself you can download the [ftp://ftp.trolltech.com/qtopia/tech-preview/ technical preview] or [ftp://ftp.trolltech.com/qtopia/snapshots/ snapshots]

== Tips ==
Most things seem to work out of the box, however you may need to use the following command to get audio:
 alsactl -f /etc/gsmhandset.state restore
Or put this command in /etc/init.d/qpe line 64

Do not switch themes.  Only the default theme is usable.  For example, once you switch themes, the lock feature continues to work, but only if you unlock using the smallest # keypad in the world.

Suspend support is very flaky.  The neo often shuts off from a suspend state.  It will not wake from suspend for an incoming call or text message (someone try setting an alarm and report results here).  To turn suspend off (this will of course use the batteries very quickly), hit the down arrow next to the suspend setting in the power management until it says "Off".

When using the virtual keyboard, do a quick flick up or down over the keyboard to access numbers/symbols/capitals.

In summary, Qtopia on the Neo1973 is much closer to being ready than OpenMoko as of this writing.  However, sound and suspend support prevent it from being at all useful as a cell phone (as a landline that doesn't ring but instead vibrates, it works ok).

== Screenshots ==

Here are some screenshots of Qtopia runing on a Neo 1973. Personally I find it very impressive...



{|
|-
|[[Image:Qtopia001.png|thumb|center|300px]]
|[[Image:Qtopia002.png|thumb|center|300px]]
|[[Image:Qtopia003.png|thumb|center|300px]]
|-
|[[Image:Qtopia004.png|thumb|center|300px]]
|[[Image:Qtopia005.png|thumb|center|300px]]
|[[Image:Qtopia006.png|thumb|center|300px]]
|}

== Videos ==

 http://www.youtube.com/watch?v=YW5q8SpY7t4
 http://www.youtube.com/watch?v=iOG_mtSEMgs

For full size videos, 346 MiB:

 http://linuxtracker.org/download.php?id=4613&name=qt_on_neo1973_videos.torrent
