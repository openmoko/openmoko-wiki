== Software Image ==

We were using u-boot, kernel and rootfs images from http://people.openmoko.org/werner/devirginate-20070301.tar.gz
to pre-install the devices. This is a self-contained [[devirginator]] snapshot, and can be used at any given time to fully restore the phone ('''complete loss of data is implied'''). This is how to restore the phone:

Download to the Linux PC that will do the installation.

Go to a convenient directory, then

 tar xfz devirginate-20070301.tar.gz

Enter the directory:

 cd devirginate-20070301

Disconnect everything:
* the USB connector of the debug v2 board from the PC
* the USB cable from the Neo
* remove the battery

Connect the Neo to the debug v2 board.

Connect USB of the debug v2 board to the PC.

If you have a serial console, start it now. The device should be
something like /dev/ttyUSB0.

Connect the USB cable of the Neo.

Insert the battery.

Power on the Neo. (If it has powered on by itself, that's okay.)

Start OpenOCD (if you have a local openocd.cfg, please use that one):

 tmp/openocd -f tmp/openocd-debugv2.cfg

OpenOCD should print one line (below) and keep running:

 Info:    openocd.c:84 main(): Open On-Chip Debugger (2007-01-31 12:00 CET)

If OpenOCD prints an error, please disconnect the USB cable of
debug v2 from the PC, connect it again, then restart OpenOCD.

In another window, start the install script:

 ./devirginate -0 -1 -2

{{note|The '''-0''' option irrecoverably destroys bad block information provided by the chip manufacturer. This is only appropriate for devices from phase 0, or earlier. Instructions will be updated for later models.}}

Watch the screen of the Neo. The following things should happen:
* it turns on, showing weird things for about 10-30 seconds
* the screen goes dark for 1-2 minutes
* the screen lights up and shows a smiling face for a few minutes
* the screen goes dark and shows a partial (broken) OpenMoko logo for about 5-10 seconds
* the screen goes dark again, then shows the full OpenMoko logo
* the machine will boot Linux now and start touch screen calibration

== Errata ==

* u-boot can power-off the phone while in DFU mode
