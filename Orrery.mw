{{Application|Orrery}}

----
Please note: Some websites have links directly to the .ipk files for this program.   While it is very flattering that other people like the program enough to include a link to the .ipk file, those links will not automatically update when a newer .ipk file is uploaded.   So using one of those links might cause you to install an obsolete version of the program.   If your version of the code doesn't match the description below, please download the most recent version from here: [http://projects.openmoko.org/projects/orrery/]
----

== Overview ==
The orrery is a simple open-source application for the Openmoko platform
which displays the night (and day!) sky. It is nowhere near as elaborate as, for
example Google Sky or xephem. It is intended to be a small application
that will have a storage footprint comparable to a ringtone, or one of
the games bundled with the openmoko rootfs. It requires no network connection,
but does use the GPS information, by querying gpsd.   
It will be converted to work with Gypsy once the dbus based software stack
becomes available.

The star database was extracted from the Hipparcos catalog.   To ease the
computational load, the coordinates are not precessed or nutated before
being displayed.   Orbital elements are used,
rather than ephemerides, to calculate planet positions.   Although
this is less accurate, it drastically reduces the memory
footprint.   The planet positions are accurate to a few arc
minutes, from 3000 BC to 3000 AD.  Since the scale
on the default display is approximately 8 arc minutes
per pixel, these small errors are imperceptible.

== The Display ==

[[Image:OrreryWithMenuTabs.png|Orrery with Menu Tabs]]

The image above shows the default display - all stars visible to the unaided
eye, with colors for the brightest ones.   It's displayed with a 
Transverse Mercator projection (similar to Norton's Star Atlas) which works
well with the VGA aspect ratio in portrait mode.   
It's a conformal transformation, so the
constellations have about the right shapes.  The Sun, Moon and planets are
plotted, and the Moon is shown with the proper phase.   The Sun and Moon are
plotted with a size about 3.5 times larger than their true angular size on
the sky.

=== The orrery as a compass ===
The green numbers at the bottom are the azimuth values.   The
azimuth is measured along the horizon, from north through east.
So the azimuth of due north is 0, east is 90, south is 180
and west is 270 degrees.   By using these azimuth values, the
orrery can be used as a celestial compass, if the sky above you
is at least partially clear.   Notice that the azimuth values are
not exactly evenly spaced.   This is caused by the distortion
introduced by the Transverse Mercator projection.

=== Constellations Display ===
There are two display screens defined.   By default, one of them shows
the display shown above, and the other shows the constellations, and
symbolic representations of the solar system objects.

[[Image:OrreryFullScreenConstellations.png|Orrery Full Screen Constellation]]

The constellations are plotted in three colors.  The twelve zodiac
colors are plotted in hot pink.  The constellations plotted in
yellow are the classical Greek constellations, as listed in Ptolomy's
Almagest.  The only constellation from the Almagest which is not
plotted is Argo Navis, which is not one of the official modern
constellations.   The remaining constellations, plotter in blue, where
added during the last few hundred years.

In addition to constellation names and figures, the Celestial Equator 
(light yellow), Ecliptic (red) and Galactic Plane (blue-green) are shown.  
Solar system objects are shown symbolically (see Mercury, Venus,
the Moon and the Sun in the above image).

== Control Modes ==
The orrery has two control modes, "finger mode" and "stylus mode".
By default the program is in finger mode. In finger mode, the image 
can be panned by tapping your finger in
the bottom 1/5 of the display (excluding menus).   The size of
the panning step is controlled by how close your finger is
to the edge of the display.   If you tap in the center, it pans
by 0 degrees, and nothing happens.   If you tap near the 
left or right edges, it
pans by the maximum allowed amount, +-45 degrees.   Pan steps are
quantized in increments of 5 degrees.   You may exit fullscreen mode
by tapping anywhere in the upper 1/5 of the display area.
Tapping anywhere else toggles between the two screens.

If you are in stylus  mode, the view can be panned around the sky by 
tapping the green arrows at the bottom, or the green azimuth values.
In stylus mode, to exit from fullscreen you must tap in the area
above the upper blue line, in the region where the time and location
are displayed.   Tapping anywhere else toggles between the two screens.

There is a check box in the opts menu which allows you to turn finger mode on and off.

One may enter fullscreen mode by tapping the FS button at the
bottom left of the display.

== Menus ==
When not in fullscreen mode, one button and four menus are displayed at the bottom of the screen.

===FS===
Pushing the "FS" button pops you into fullscreen mode.   To exit,
tap the top 1/5th of the display (if you are in finger mode) or
the region where the location and time is displayed (in stylus mode).

=== opts ===
The opts menu allows you to toggle between finger and stylus mode.
It also has a checkbox labeled "Save All Changes". If that box is
checked, all changes you make within the menus are saved to flash
memory when you click the "OK" button.   If "Save All Changed" is not
selected, you must click the "Save to Configuration File" to save
changed configurations to flash - clicking "OK" makes the changes
active for the current session, but does not save to flash.

The "White Flashlight" button paints the entire screen white, and the
"Red Flashlight" button paints the entire screen red.   Both may
be used as a flashlight, but the red one is best if you are trying
to preserve your night vision.

=== time ===
The time menu allows you to specify an
explicit time between 3000 BC and 3000 AD, or the current
time.   If "Now" is selected, the current time is used and the display updates
automatically once per minute.   If a specific time is selected,
it is shown in red, to remind you that the display is not
going to update automatically as time passes.   The time may be
specified as a calendar date, or as a Julian Date. 

The Julian Date is a less ambiguous way of entering times
in the distant past than using a calendar date, because of the
differing calendar systems in use worldwide before the late 16th 
century.  For example, the date October 10, 1582 never occurred in
some European countries.  Many countries have gaps in their calendars
with missing dates when they adopted the Gregorian Calendar.


=== place ===
The place menu allows you to select the GPS-derived location,
a user specified latitude and longitude, or a city or
astronomical observatory selected from a menu.   The lists of
locations are stored in ASCII text files under the menus subdirectory
of the program installation area on your phone.   You may
save your selected location, by hitting the "Save
to Configuration File" button, so it will be used the
next time you start the orrery.   If you would like
to add additional cities etc to one of the menus, you may simply
edit one of the menu files, and add the name, latitude and longitude
of the location.   You will need to restart the orrery program for
your new locations to become available.

If you select a "Custom" or "Menu" location, a button labeled
"Save in Private Menu" will appear.   After you select your new position,
you may push that button to save it in the menu labeled "Private".
That menu is initially empty.

=== items ===
The display menu allows you to configure the display, selecting
such things as the faintest magnitude object displayed, whether constellation
lines are plotted, whether or not star names are displayed, etc.

== Symbols ==
=== Planet Symbols ===
The solar system symbols, used by default on the constellation
page (screen two), are the standard astronomical symbols for these
objects.   They are explained here:
[http://en.wikipedia.org/wiki/Planet_symbols]

=== Plotted Lines ===
The dotted yellow line is the Celestial Equator, the intersection of
the Earth's equatorial plane with the celestial sphere.   The red
dotted line is the Ecliptic.   The Ecliptic is the intersection
of the Earth's orbital plane with the celestial sphere.   The
Ecliptic is also the path of the Sun across the sky, and the intersection
points between the Celestial Equator and the Ecliptic are where the
Sun is at the time of an equinox.   Constellations lying along the
Ecliptic plane are zodiac constellations.   The planets and the Moon 
are always near, but usually not exactly on, the Ecliptic.
The blue-green dotted line is
the Galactic Plane, the intersection of the plane of the Milky Way's
disk and the celestial sphere.

== System Requirements ==
=== Supported Phones ===
This program will run on either the neo1973 (gta01)
or the FreeRunner (gta02).   Users of the neo1973
may wish to move the files to the microSD card, to
save space in the limited builtin flash memory
(see below).

=== Supported Software Stacks ===
This program has been tested running atop the
2007.2 and 2008.8 distributions.   It probably will
work with FSO too.  It is gtk based.

=== Memory Requirements === 
This program requires 630 kbytes of storage space in the phone's
builtin flash storage or microSD card.   By default, most of
the files (everything except the .desktop file, the launch
icon and the executable) are stored under /usr/share/orrery.
This directory tree may be moved elsewhere, if the new
location is specified with the -d switch on the orrery
invocation line in the .desktop file.   The .desktop
file resides in /usr/share/applications .

== Installing this Program ==
.ipk files for this program are now available for both the 2007.2
and 2008.8 stacks, at the gForge site.   It is much easier to install
than it used to be.  The latest .ipk files can be found here:
[http://projects.openmoko.org/projects/orrery/].

== Known Bugs ==

=== Blurry Orion Label ===
Ooops - I didn't remove some emacs backup files from
my first .ipk files.   The only visible
effect of this that the name of the constellation
Orion will be typed twice, slightly displaced from each
other, one with a tilda (~) following it.   You can fix
that by removing the file
/usr/share/orrery/constellations/Orion~ . This problem
was fixed on the 1.1.1 .ipk file for 2007.2, and the
1.1.2 .ipk file for 2008.8 .

=== Restarting gpsd crashes orrery ===
If you restart gpsd while the orrery is running, the
orrery will crash if it is configured to use the GPS position.

'''Send more bug reports!'''

== Revision(ist) History ==
 Version 1.2:
    New user features:
        Constellation stick figures are now shown
        in three colors:
            Pink constellations are zodiac
                 constellations
            Gold constellations are the non-zodiac
                 constellations from Greek antiquity,
                 as listed in Ptolomy's Almagest.
            Blue constellations are modern additions
 
        On screen 1, if "Display Names" is selected,
        planet names are now displayed in addition
        to star names.
 
        Transition to and from fullscreen mode has
        been sped up.
 
        The time can now be entered as a Julian Date.
        This is a less ambiguous way of entering times
        in the distant past than using a calendar date,
        because of the differing calendar systems in use
        worldwide before the late 16th century.
 
        The label of the "fullscreen" button was changed
        to "FS" and the label of the "display" button
        was changed to "items".   Those changes were made
        to make room for another pulldown menu, labelled
        "opts", which allows one to modify parameters
        which effect all displays.   The first of these
        options is the finger mode options, and the
        second is a new option called "Save All Changes".
        If "Save All Changes" is selected, then the
        "Save to Configuration File" option will be
        removed from the menus, and clicking the "OK"
        button will have the "Save to Configuration File"
        effect.   A lot of people believe this is how
        programs on handheld devices should work - the
        user should never have to explicitly save changes.
 
        Red and white flashlight buttons under the opts
        menu have been added.   These buttons set all
        pixels red or white.   Red flashlight mode is
        better for preserving night vision.   To exit
        flashlight mode tap the display anywhere.
 
        Added the ability to save locations to the Private
        location menu.   This option appears in the "place"
        If the Custom or Menu checkbox is clicked.   The
        Private menu is now empty by default (it used to
        contain "Cambridge MA").
 
    Bug Fixes:
    	Spelling error fixed in writing of config file
        parameter DEBUG_MESSAGES_ON.
 
        Initial display of constellations has been sped
        up considerably.
 
        Fixed a bug which occasionally caused the routine
        which creates location menus to seg fault.

== Contact Information ==
Please send comments, suggestions, questions and/or
abuse to orrery.moko@gmail.com

[[category:Applications]]
[[category:GPS Applications]]
