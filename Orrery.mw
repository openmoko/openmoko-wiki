{| style="background-color:#EFEFFF;color:#000;border:1px solid #9F9FFF;margin:1em 5% 1em 5%;"
| style="padding:0.5em 0.5em;" |
| style="padding:0.5em 0.5em;" | <b>In progress:</b> This {{{1|article or section}}} documents one or more features whose implementation are <i>in progress</i>.
|}<includeonly>
[[Category:In progress]]
</includeonly>

[[Category:Applications]]

'''NEWS'''

.ipk files for this program are now available for both the 2007.2
and 2008.8 stacks.   It is much easier to install than it used to be.

Version 1.1 Released:
    New user features:
        1) Added "finger mode", which allows
           orrery to be used without a stylus.
           This is now the default mode.
        2) Users can now specify which
           directory is the top of the data file 
           tree for orrery.   By default, this is 
           /media/card/orrery, but the -d switch
           overrides this, so
           "orrery -d /usr/share/orrery"
           will tell orrery to
           look in /usr/share/orrery for the
           data files.
        3) The orrery will now display the names
           of some of the most prominent
           stars.   This is not enabled by
           default, however - you must select
           this feature using the "display" menu.
    Bug Fixes:
        1) Fixed bug which caused cardinal point 
           label ("North" etc) to be
           displayed at the top of the window 
           rather than at the bottom, where
           it belongs.


Note - although the screenshots shown here were
taken with the 2007.2 stack, this application
works under 2007.2 or 2008.8 (ASU).

The orrery is a simple open-source application for the Openmoko platform which displays the night sky. It is nowhere near as elaborate as, for example Google Sky or xephem. It is intended to be a small application that will have a storage footprint comparable to a ringtone, or one of the games bundled with the
openmoko rootfs. It requires no network connection, but does use the GPS information, by querying gpsd.   It will be converted
to work with Gypsy once the dbus based software stack becomes
available.

[[Image:OrreryWithMenuTabs.png|Orrery with Menu Tabs]]

The image above shows the default display - all stars visible to the unaided eye, with colors for the brightest ones.   It's displayed with a Transverse Mercator projection (similar to Norton's Star Atlas) which works well with the VGA aspect ratio.  It's a conformal transformation, so the constellations have about the right shapes.  The sun, moon and planets are plotted, and the moon is shown with the proper phase.   The sun and moon are
plotted with a size much larger than their true angular size on
the sky.

In "finger mode" The image can be panned by tapping your finger in
the bottom 1/5 of the display (excluding menus).   The size of
the panning step is controlled by how close your finger is
to the edge of the display.   If you tap in the center, it pans
by 0 degrees, and nothing happens.   If you tap near the 
left or right edges, it
pans by the maximum allowed amount, +-45 degrees.   Pan steps are
quantized in increments of 5 degrees.

If you are not in finger mode,
the view can be panned around the sky by tapping the green arrows at the bottom, or the green azimuth values.

[[Image:OrreryFullScreenSky.png|Orrery Full Screen Sky]]

If one taps the main display area, the program toggles into constellation mode, as shown below.   

[[Image:OrreryFullScreenConstellations.png|Orrery Full Screen Constellation]]

In addition to constellation names and figures, the celestial equator (light yellow), ecliptic (red) and galactic plane (blue-green) are shown.  Solar system objects are shown symbolically (see Mars, the Moon and the Sun in the above image).

The star database was extracted from the Hipparcos catalog.   To ease the computational load, the coordinates are not precessed or nutated before being displayed.   Orbital elements are used,
rather than ephemerides, to calculate planet positions.   Although
this is less accurate, it drastically reduces the memory
footprint.   The planet positions are accurate to a few arc
minutes, from 3000 BC to 3000 AD.

There are three menus.

The time menu allows you to specify an
explicit time between 3000 BC and 3000 AD, or the current
time.   If current time is selected, the display updates
automatically once per minute.

The place menu allows you to select the GPS-derived location,
a user specified latitude and longitude, or a city or
astronomical observatory selected from a menu.

The display menu allows you to configure the display, selecting
such things as the lowest magnitude displayed, constellation
lines, etc.

When in fullscreen-mode you have to tap the area near the top of the display to quit fullscreen-mode.   In finger mode, you
may tap anywhere in the top 1/5 of the display.   If you
are not in finger mode, you must tap above the top
blue line, in the region
where the GMT, LST and location are shown, to quit fullscreen.

An opkg package, and/or source code and executables can be downloaded from

https://projects.openmoko.org/projects/orrery/

Known Bugs:  The first time you tap the display
to go into constellation mode, it takes several
seconds to show the constellations.   This only
happens the first time - subsequent switches
are pretty fast (< 1 second).

Please send comments, suggestions, questions and/or
abuse to orrery.moko@gmail.com

[[category:Openmoko]]
[[category:GPS]]
