== General Comments ==
You will most likely need kernel version 2.6.20 or higher

== Ubuntu Feisty 7.0.4 ==
To prepare your environment run the following:
<pre>
sudo apt-get install linux-kernel-source linux-kernel-headers
</pre>

Uncompress /usr/src/linux-source-2.6.##.tar.gz, link it to /usr/src/linux, and ensure /lib/modules/`uname -r`/build exists, then run the following:
<pre>
mkdir usb_module_dir
cd usb_module_dir
cp -r /usr/src/linux/drivers/usb/* .
cd gadget
echo "KDIR := /lib/modules/`uname -r`/build" >> Makefile
echo "PWD := `pwd`" >> Makefile
echo "obj-m := dummy_hcd.o gadgetfs.o" >> Makefile
echo "default: " >> Makefile
echo -e "\t\$(MAKE) -C \$(KDIR) SUBDIRS=\$(PWD) modules" >> Makefile
make
</pre>

Once the kernel modules ( dummy_hcd.ko and gadgetfs.ko ) are built, you must remove (or move) the gadgetfs and net2280 as follows:
<pre>
sudo mv /lib/modules/`uname -r`/kernel/drivers/usb/net/net2280.ko ./original_net2280.ko
sudo mv /lib/modules/`uname -r`/kernel/drivers/usb/net/gadget.ko ./original_gadgetfs.ko
</pre>

and replace them with the new modules:
<pre>
sudo cp dummy_hcd.ko and gadgetfs.ko /lib/modules/`uname -r`/kernel/drivers/usb/net/
sudo depmod
</pre>

The net2280 module provides conflicting symbols and causes interference with the dummy_hcd module.
