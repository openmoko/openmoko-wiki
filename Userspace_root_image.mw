== Creating a root filesystem from scratch ==

To create a root file system image for storage in NAND flash, we use the mkfs.jffs2 program contained int the Debian package ''mtd-tools''.

 mkfs.jffs2 --pad=0x700000 -o rootfs.jffs2 -e 0x4000 -n -d/tmp/jffsroot/

is a typical command.  It creates a FS image for our erase block size of 16k, padded to 0x700000 bytes in length from the files contained in the ''/tmp/jffsroot'' directory and stores the FS image in ''rootfs.jffs2''.

== Using pre-created root fs image ==

=== OpenEmbedded ===

OpenEmbedded will itself create a jffs2 image at the end of the build process.

Once the build server is running, it will create root filesystem images for us.

=== demo JFFS2 root image ===

At the moment there is an OpenMoko image for the developer release available.

http://buildhost.openmoko.org/tmp/deploy/images/openmoko-devel-image-fic-gta01-20070704215706.rootfs.jffs2

Please note that this image may take long to boot the first time, since this boot finishes the installation process.

== Flashing a root filesystem into NAND ==

See [[U-boot#Writing_rootfs_to_NAND]]

[[Category:Software]]
