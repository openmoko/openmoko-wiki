The [[Neo1973 Battery]] charging logic is embedded into our [[:Category:Neo1973 Hardware#Power_Management|PCF50606 PMU]] (Power Management Unit).

The PCF50606 supports a variety of [[Neo1973 Battery]] charging modes, based around the hardware limitations of USB.

USB hubs may only provide up to 100mA per device.
If more than the available current is drawn from them, they may be reset, or power off.
This resets all devices connected to the USB bus, possibly causing data loss.
So, fast charge mode is only enabled after the Neo is told that it is safe to charge at this current. 

An alternative method is used if the proper charger for the Neo is used.
If the neo measures 48kohm +/- 1% between usb pin 5 and ground, it will detect the dumb charger and use it for fast charging. 

An alternate method - for example sensing if there is no USB communication from the host for 30 seconds - as may be the case with dumb 'USB chargers' - would need to be used to be compatible with the vast majority of already existing hardware. 
This has a small risk of causing busses it is connected to in suspend mode, when they are not active, to crash, and is not compliant with the specification. 

{{warning|While we have spent a significant amount on various safe-guards such as battery-internal overcurrent/overvoltage protection, manual twisting with low-level charger control aspects is not recommended.  It might damage either the [[battery]] or charging circuit.}}

== Charging Modes ==

=== Pre Charge ===

The default mode is what the PMU calls 'Pre Charge'. In which we draw up to 100mA charging current from the USB socket.  This mode is safe to use on any USB socket, since the USB  specification mandates that 100mA is always available.

However, 100mA charging at a 1200mAh [[Neo1973 Battery]] means around 12hrs charging time, not very practical at all.

=== Fast Charge ===

Fast Charge is what the PMU calls the charging mode in which we draw up to 500mA charging current from the USB socket.  This mode can only be used if the USB stack on the host controller has selected a '''USB Configuration''' for the Neo which allows it to draw 500mA.

By default, if you apply +5V to the USB device socket, we draw only 100mA. 

==== Fast Charge (CCCV) ====

Fast charging, using first constant current, later constant voltage.  This is what we use for our Li-Ion [[Neo1973 Battery]]

==== Fast Charge (CVCC) ====

[[Category:Neo1973 Hardware]]


== Neo1973 emergency charging ==

=== from deep discharged battery ===

A deep discharged battery is one where the terminal voltage is below the minimal voltage threshold.  The Neo1973 (specifically: The PCF50606 PMU) will not power-on the device.

If you make sure to remove the USB cable and put a deep discharged battery into the Neo1973, the battery can still be charged.  All you need to do is to provide 5V to the USB socket, by either connecting the Neo1973 to some USB port or a battery charger.

The battery will charge only with 100mA, and it will take a couple of hours until the battery is again charged to a level where it can power the phone.

{{note|Please do not press the power button before you have waited for something like four hours. If you do so, the phone might [partially] power up, and draw more power than the 100mA supplied by the charger/USB}}
