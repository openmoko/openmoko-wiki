'''[[Illume]] keyboard''' (aka '''Raster Keyboard''', as it has been made by user:Rasterman) is a non-predictive, corrective virtual [http://en.wikipedia.org/wiki/Keyboard_%28computing%29#Touchscreens touchscreen keyboard].

The Illume keyboard is the default touchscreen keyboard in [[Om 2009]].

== How to use [[Illume_keyboard|(Raster's) keyboard]]? ==

The Illume keyboard has been thought not to guess the word you want to type and suggest it to you before you end typing, but to take into account the fact that since the keyboard space is little, you might have pressed a wrong key while typing.

It is intended to work with a dictionary for your language, any dictionary taken from the /usr/share/dict directory of your linux distro is ok. After you have the dictionary, the keyboard learns new words as you type them.

Illume keyboard has three modes you can use:
*Default
*Number
*Terminal
You can switch with the button on top right.

Number and Terminal are quite self-explaining, the only interesting thing is that if you feel like changing their layout to something more comfortable to you, then read [[Illume_keyboard#How_to_install_a_new_Keyboard_Layout]].

Default mode works like this:
* you type a sequence of letters
* for each letter you type the keyboard takes into consideration the distance from the point you pressed and ANY letter in the neighborhood, not only the one you pressed. This is because you might have missed the letter you wanted to type.
* while you type, the keyboard makes a combination of all the words that you could have typed, looks for them in the dictionary and presents them in an order that depends both on their frequency use and the distance from coordinates from where you touch the screen.

Now tips and usage tricks:
* if you want to enter a word that it's not in the keyboard, you simply enter it, then push the button on top left. That button shows the complete list of the possible words, and on top of it the one you really entered.
* if you push a letter and keep it pushed for a couple seconds, you enter exactly that letter. 
* to backspace or whitespace you slide with your finger on any place in the keyboard from right to left or from left to right.  

You do not need to erase that much, keep in mind that the keyboard is done to correct your errors, so if you realize you pushed the wrong letter, go on typing instead of erasing.

Raster explained this in a long and detailed post, [http://lists.openmoko.org/nabble.html#nabble-td2115715 here]

How to use [[Illume_keyboard|(Raster's) keyboard]]?:
* Sliding down over any keyboard sends Enter
* Sliding up over any keyboard switches to the next keyboard
* Tapping the upper-right key ("a", "1" or "q") lists the available keyboards
* Tapping the upper-left key "Abc" lists the available dictionaries
<br>
* With "a" keyboard:
* Sliding left over the keyboard deletes the last entered key
* Sliding right over the keyboard sends the composed word
* Tapping the upper-left key "Abc" during the composition of a word
lists all possible words in order to choose the right one
<br>
* With "q" keyboard:
* Sliding left over the keyboard sends a backspace
* Sliding right over the keyboard sends a space

== How to install the illume (Raster's) keyboard ? ==
{{Note|This install section might not be up to date for Om 2009}}
Make sure you have installed illume-config (qwerty button) and illume-config-illume
<pre>
opkg install illume-config illume-config-illume 
</pre>

Turn off built-in qtopia keyboard:

Edit /etc/X11/Xsession.d/89qtopia and set
<pre>
export QTOPIA_NO_VIRTUAL_KEYBOARD=1
</pre>
Add it if it is not there.

Purge E's cache
<pre>
rm -rf ~/.e/e/config/illume
</pre>

Restart X
<pre>
/etc/init.d/xserver-nodm restart
</pre>

Then switch keyboard from "None" to "Default" in Illume's preferences.

*Troubleshoting
If this does not work for your installation: See [[Keyboard Toggle]] or change /etc/enlightenment/default_profile to point to the illume profile instead of asu.

== List of illume keyboards ==
{| class="wikitable sortable" border="1" cellpadding="5" cellspacing="0"
! icon !! type (mode) !! package !! comments
|-
| [[Image:Arabic.png]] || alphanumeric || [http://www.opkg.org/packages/illume-keyboards-arabic_0.1_armv4t.ipk Arabic QWERTY layout] || optimized for arabic alphanumeric layout.
|-
| [[Image:Qwerty.png]] || terminal || [http://trac.enlightenment.org/e/browser/trunk/e/src/modules/illume/keyboards/Terminal.kbd English QWERTY layout] || Installed by default.
|-
| [[Image:Qwerty-dutch-nl.png]] || terminal || [http://www.opkg.org/package_179.html Dutch QWERTY layout] || Based upon QWERTY terminal layout, optimised for Dutch, usable for most north-western European languages.
|-
| [[Image:Azerty-french-fr.png]] || terminal || [http://depot.tuxgasy.fr/download/openmoko/azerty/Azerty.kbd French AZERTY layout] || Based upon QWERTY terminal layout. TODO: Icon needs AZERTY overlay.
|-
| [[Image:Qwerty-norwegian-no.png]] || terminal || [http://www.aitel.hist.no/~helgehaf/openmoko/ Norwegian QWERTY layout] || Based upon QWERTY terminal layout.
|-
| [[Image:Terminal-russian-ru.png]] || terminal || [http://lucky.awardspace.co.uk/openmoko Russian ЙЦУКЕН layout] || Based upon QWERTY terminal layout.
|-
| [[Image:Dvorak.png]] || terminal || [http://tg.x-net.hu/openmoko/keyboards/ Dvorak layout ] || Based upon QWERTY terminal layout.
|-
| [[Image:Alpha.png]] || alphanumeric || [http://trac.enlightenment.org/e/browser/trunk/e/src/modules/illume/keyboards/Default.kbd English QWERTY layout] ||  Installed by default.
|-
| [[Image:Alpha.png]] || alphanumeric || [http://www.opkg.org/package_180.html English finger friendly QWERTY layout] || Based upon QWERTY alphanumeric layout.
|-
| [[Image:Alpha-hebrew-il.png]] || alphanumeric || [http://www.stosb.com/openmoko/illume-keyboards-hebrew_0.4_armv4t.ipk Hebrew פםןךטא layout] || In case there are squares instead of Hebrew letters, change illume's font.
|-
| [[Image:Alpha-danish-dk.png]] || alphanumeric || [http://projects.openmoko.org/projects/danish-illume/ Danish QWERTY layout] || Based upon QWERTY alphanumeric layout.
|-
| [[Image:Alpha-german-de.png]] || alphanumeric || [http://www.hackenberger.at/openmoko/German.kbd German QWERTZ layout] || Based upon QWERTY alphanumeric layout.
|-
| [[Image:Alpha.png]] || alphanumeric || [http://milad.rastian.com/tmp/Persian.kbd Perisan QWERTZ layout] || Based upon QWERTY alphanumeric layout. TODO: Create new icon for the Persian alphabet of پﺏﺍ like the transparent ABC.
|-
| [[Image:numeric.png]] || numeric || [http://trac.enlightenment.org/e/browser/trunk/e/src/modules/illume/keyboards/Numbers.kbd Numeric layout] || Installed by default. 
|-
| [[Image:numeric-alt.png]] || numeric || [http://www.opkg.org/package_106.html Alternative finger friendly numeric layout] || Major improvement on numeric layout. 
|-
| [[Image:browse.png]] || numeric || [http://www.opkg.org/package_144.html Finger friendly browse layout] || Derived from numeric layout. 
|}

'''NOTE:''' They are all available from SHR's repositories (illume-keyboard-LANG) and hopefully will be available in other repos soon.

Icons are created by hand in a 25x25 PNG with the GIMP according to color picker values of flags in Wikipedia. The reason for this is, that no rescaling or ant-alias artifacts will emerge in this small raster. Subsequently, import this in Inkscape and type the characters. Note that for keyboard layout that are not connected to a single particular country, like Persian, no flag backgrouns is needed. Each character is typed twice in Arial Black or bold Arial. For alphanumeric, use the ABC of that language, for 'QWERTY' use the 6 first characters on the top row, note that for languages that read from richt to left is to use 'first'/last 6 characters on the right side. One characters is white with a black border of 0.5 and one is black without border but with a blur of 15 (see CTRL+SHIFT+F slider at the bottom). Reposition the whole lot and put everything in the correct layer. Export a 25x25 PNG with the background bitmap, which is also the selected export area, and you are done. [http://www.youtube.com/watch?v=F6QNL1mvXdI Here] is a video of this procedure.

'''TODO''': Rasterman, can you verify this and improve this procedure where needed? Especially improve details on which font to use and which Gaussian blur to use.

=== How to install a new Keyboard Layout ===
{{Note|This install section might not be up to date for Om 2009}}

* copy or download the kbd File to <pre>/usr/lib/enlightenment/modules/illume/keyboards</pre>
* issue the command: <pre>killall -HUP enlightenment</pre>
* if that didn't work do: now restart the XServer with the following command <pre>/etc/init.d/xserver-nodm restart</pre>
* you should now be able to select the newly installed keyboard

=== How to make your own Keyboard Layout (Illustration)===

<pre>
##KBDCONF-1.0
kbd 450 150

# keyboard type e.g. TERMINAL, ALPHA (this one shows up when writing an sms), NUMERIC, SYMBOL
type TERMINAL
# an icon for the keyboard so you know which one you have
icon qwerty.png

#key  x-coordinate  y-coordinate width-of-key height-of-key
#columns:
#state     symbol(shown on the key)    keysym(output of the key)
key   0   0  30  30
  normal   ` grave
  shift    ~ asciitilde
  capslock ` grave
</pre>

a list of keysyms can be found [http://www.in-ulm.de/~mascheck/X11/keysyms.txt here]

=== How to import dictionaries ===
If you want to use illume's predictive keyboard in a language other than US English, you should import your own dictionary. You can find a .dic file that works with illume in [http://en.wikipedia.org/wiki/MySpell myspell] or [http://en.wikipedia.org/wiki/Hunspell hunspell]. If you have it installed on your linux machine, you should find the dictionary file in <pre>/usr/share/myspell/dicts</pre> Just copy it over to <pre>/usr/lib/enlightenment/modules/illume/dicts/</pre> on your phone. Now you should be able to select it via the dictionary selector on the illume keyboard. The drawback is that they don't come with predefined frequency values though, so predictions won't be very good at first until illume has learned by usage. Still a "dumb" dictionary in your own language should work much better than a smart English one for non-english texts.

The Terminal layout has an empty dictionary. The words you type are entered automatically in the dictionary.

To add another language you have to do the following steps:
* Get a dictionary file from your computer.
On Debian/Ubuntu systems, it is located in /usr/share/dict
Here is a [http://blog.1407.org/2008/10/13/portuguese-dictionary-for-openmokos-illume-keyboard/ Portuguese dictionary for OpenMoko’s Illume keyboard].

To add a dictionary you can find them by typing :
 apt-cache search wordlist|grep ^w|sort
and install it on your computer with :
 apt-get install wfrench # (replace french with your language)
* Copy the dictionary to your freerunner in /usr/lib/enlightenment/modules/illume/dicts/
for example do :
 scp /usr/share/dict/french root@192.168.0.202:/usr/lib/enlightenment/modules/illume/dicts/French.dic
* Now you can choose your language in the upper left corner of the keyboard !

[[Category:Touchscreen keyboards| ]]
